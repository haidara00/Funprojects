<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Color Swipe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        #gameContainer {
            position: relative;
            width: 95vmin;
            height: 85vmin;
            max-width: 400px;
            max-height: 700px;
            background: rgba(20, 20, 40, 0.7);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 2px solid #4a4aff;
        }
        #gameArea {
            width: 100%;
            height: 100%;
            position: relative;
        }
        #targetArrow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            transition: transform 0.1s;
            text-shadow: 0 0 20px currentColor;
        }
        .swipeZone {
            position: absolute;
            width: 50%;
            height: 50%;
        }
        #zoneUp { top: 0; left: 25%; }
        #zoneRight { top: 25%; right: 0; }
        #zoneDown { bottom: 0; left: 25%; }
        #zoneLeft { top: 25%; left: 0; }
        #hud {
            position: absolute;
            top: 15px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            font-size: 1.3em;
            font-weight: bold;
            pointer-events: none;
        }
        #score, #timeLeft, #combo {
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            min-width: 90px;
            text-align: center;
        }
        #score { color: #4eff9e; }
        #timeLeft { color: #ffb84a; }
        #combo { color: #ff6bcb; }
        #startScreen, #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 12, 41, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            z-index: 20;
        }
        #gameOverScreen { display: none; }
        h1 {
            color: #6b6bff;
            margin-bottom: 10px;
            font-size: 2.8em;
            text-shadow: 0 0 15px #6b6bff;
        }
        h2 {
            color: #ffb84a;
            margin-bottom: 20px;
            font-size: 2em;
        }
        p {
            margin-bottom: 25px;
            color: #ccc;
            max-width: 320px;
            line-height: 1.5;
        }
        .ctaButton {
            background: linear-gradient(to right, #6b6bff, #4a4aff);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            margin-top: 15px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(107, 107, 255, 0.4);
            transition: all 0.2s;
        }
        .ctaButton:active {
            transform: scale(0.96);
        }
        #comboFeedback {
            position: absolute;
            top: 70%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            text-shadow: 0 2px 10px black;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="gameArea">
            <div id="targetArrow">⬆️</div>
            <div class="swipeZone" id="zoneUp"></div>
            <div class="swipeZone" id="zoneRight"></div>
            <div class="swipeZone" id="zoneDown"></div>
            <div class="swipeZone" id="zoneLeft"></div>
            <div id="comboFeedback">COMBO!</div>
        </div>
        <div id="hud">
            <div>SCORE: <span id="score">0</span></div>
            <div>TIME: <span id="timeLeft">3.0</span>s</div>
            <div>COMBO: <span id="combo">1x</span></div>
        </div>
        <div id="startScreen">
            <h1>⚡ COLOR SWIPE</h1>
            <p>Swipe in the direction of the arrow before time runs out!<br><br>Each correct swipe gets faster.<br>Build combos for huge points!</p>
            <button class="ctaButton" id="startButton">START SWIPING</button>
        </div>
        <div id="gameOverScreen">
            <h2>TIME'S UP!</h2>
            <p>Your score: <span id="finalScore">0</span></p>
            <p>Highest combo: <span id="finalCombo">0</span>x</p>
            <button class="ctaButton" id="restartButton">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Game Setup
        const arrow = document.getElementById('targetArrow');
        const scoreElement = document.getElementById('score');
        const timeElement = document.getElementById('timeLeft');
        const comboElement = document.getElementById('combo');
        const comboFeedback = document.getElementById('comboFeedback');
        const finalScoreElement = document.getElementById('finalScore');
        const finalComboElement = document.getElementById('finalCombo');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');

        // Game Variables
        let gameRunning = false;
        let score = 0;
        let timeLeft = 3.0;
        let combo = 1;
        let highestCombo = 1;
        let roundActive = false;
        let currentDirection = 'up';
        let baseTime = 3.0;
        let timerInterval;
        let flashInterval;

        // Arrow Directions
        const directions = {
            'up': { emoji: '⬆️', color: '#ff6b6b', zone: 'zoneUp' },
            'right': { emoji: '➡️', color: '#4ecdc4', zone: 'zoneRight' },
            'down': { emoji: '⬇️', color: '#ffd166', zone: 'zoneDown' },
            'left': { emoji: '⬅️', color: '#6a0572', zone: 'zoneLeft' }
        };

        // Generate a new random direction
        function newDirection() {
            const dirKeys = Object.keys(directions);
            let newDir;
            do {
                newDir = dirKeys[Math.floor(Math.random() * dirKeys.length)];
            } while (newDir === currentDirection && dirKeys.length > 1);
            
            currentDirection = newDir;
            arrow.textContent = directions[currentDirection].emoji;
            arrow.style.color = directions[currentDirection].color;
            
            timeLeft = Math.max(0.8, baseTime); // Set time for this round
            roundActive = true;
            
            // Start time countdown for this round
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (!gameRunning || !roundActive) return;
                timeLeft -= 0.05;
                timeElement.textContent = timeLeft.toFixed(1);
                
                // Flash warning when time is low
                if (timeLeft < 1.0) {
                    arrow.style.opacity = (Date.now() % 300 < 150) ? '0.7' : '1';
                } else {
                    arrow.style.opacity = '1';
                }
                
                // Time's up - end round
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 50);
            
            // Visual feedback
            arrow.style.transform = `translate(-50%, -50%) scale(1.1)`;
            setTimeout(() => {
                arrow.style.transform = `translate(-50%, -50%) scale(1)`;
            }, 150);
        }

        // Handle correct swipe
        function correctSwipe() {
            if (!gameRunning || !roundActive) return;
            
            clearInterval(timerInterval);
            roundActive = false;
            
            // Calculate points (more points for less time remaining)
            const pointsEarned = Math.floor(50 * combo * (timeLeft + 0.5));
            score += pointsEarned;
            scoreElement.textContent = score;
            
            // Increase combo
            combo++;
            highestCombo = Math.max(highestCombo, combo);
            comboElement.textContent = `${combo}x`;
            
            // Combo feedback
            if (combo >= 3) {
                comboFeedback.textContent = `${combo}X COMBO!`;
                comboFeedback.style.color = directions[currentDirection].color;
                comboFeedback.style.opacity = '1';
                setTimeout(() => {
                    comboFeedback.style.opacity = '0';
                }, 600);
            }
            
            // Make game faster
            baseTime *= 0.97; // Reduce time by 3% each successful round
            if (baseTime < 1.2) baseTime = 1.2; // Minimum time
            
            // Visual celebration
            arrow.style.transform = `translate(-50%, -50%) scale(1.3)`;
            arrow.style.color = '#ffffff';
            document.getElementById(directions[currentDirection].zone).style.backgroundColor = 
                `${directions[currentDirection].color}40`;
            
            setTimeout(() => {
                arrow.style.transform = `translate(-50%, -50%) scale(1)`;
                arrow.style.color = directions[currentDirection].color;
                document.getElementById(directions[currentDirection].zone).style.backgroundColor = '';
                newDirection();
            }, 400);
        }

        // Handle wrong swipe
        function wrongSwipe() {
            if (!gameRunning || !roundActive) return;
            
            // Reset combo on wrong swipe
            combo = 1;
            comboElement.textContent = '1x';
            
            // Visual feedback for wrong swipe
            arrow.style.color = '#666';
            arrow.style.transform = `translate(-50%, -50%) scale(0.9)`;
            
            setTimeout(() => {
                arrow.style.color = directions[currentDirection].color;
                arrow.style.transform = `translate(-50%, -50%) scale(1)`;
            }, 300);
        }

        // Swipe Detection
        let touchStartX = 0;
        let touchStartY = 0;

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }

        function handleTouchEnd(e) {
            if (!gameRunning || !roundActive) return;
            
            const touchEndX = e.changedTouches[0].screenX;
            const touchEndY = e.changedTouches[0].screenY;
            
            const dx = touchEndX - touchStartX;
            const dy = touchEndY - touchStartY;
            
            // Determine swipe direction
            let swipeDirection = '';
            if (Math.abs(dx) > Math.abs(dy)) {
                swipeDirection = dx > 0 ? 'right' : 'left';
            } else {
                swipeDirection = dy > 0 ? 'down' : 'up';
            }
            
            // Check if correct
            if (swipeDirection === currentDirection) {
                correctSwipe();
            } else {
                wrongSwipe();
            }
        }

        // Mouse click simulation (for desktop testing)
        function handleZoneClick(zoneId) {
            if (!gameRunning || !roundActive) return;
            
            const zoneToDirection = {
                'zoneUp': 'up',
                'zoneRight': 'right',
                'zoneDown': 'down',
                'zoneLeft': 'left'
            };
            
            if (zoneToDirection[zoneId] === currentDirection) {
                correctSwipe();
            } else {
                wrongSwipe();
            }
        }

        // Game Control Functions
        function startGame() {
            gameRunning = true;
            score = 0;
            combo = 1;
            baseTime = 3.0;
            scoreElement.textContent = '0';
            comboElement.textContent = '1x';
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            // Setup event listeners
            document.addEventListener('touchstart', handleTouchStart);
            document.addEventListener('touchend', handleTouchEnd);
            
            // Start first round
            newDirection();
        }

        function endGame() {
            gameRunning = false;
            roundActive = false;
            clearInterval(timerInterval);
            
            finalScoreElement.textContent = score;
            finalComboElement.textContent = highestCombo;
            gameOverScreen.style.display = 'flex';
            
            // Remove event listeners
            document.removeEventListener('touchstart', handleTouchStart);
            document.removeEventListener('touchend', handleTouchEnd);
        }

        // Initialize Zone Click Handlers
        document.getElementById('zoneUp').addEventListener('click', () => handleZoneClick('zoneUp'));
        document.getElementById('zoneRight').addEventListener('click', () => handleZoneClick('zoneRight'));
        document.getElementById('zoneDown').addEventListener('click', () => handleZoneClick('zoneDown'));
        document.getElementById('zoneLeft').addEventListener('click', () => handleZoneClick('zoneLeft'));

        // Button Events
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);

        // Prevent context menu
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
</body>
</html>