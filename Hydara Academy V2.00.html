<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© - ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†ØªØŒ Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„">
    <meta name="theme-color" content="#0A2472">
    <title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© | Hydara Academy - ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</title>
    
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary-blue: #0A2472;
            --primary-blue-light: #1a3a9e;
            --accent-green: #00C896;
            --accent-green-light: #00e6b3;
            --action-orange: #FF6B35;
            --action-orange-light: #ff8c5a;
            --gold: #D4AF37;
            --gold-light: #e8c966;
            --dark-bg: #0a0a0a;
            --dark-card: #1a1a1a;
            --dark-border: #333;
            --text-light: #ffffff;
            --text-muted: #aaa;
            --success: #00C896;
            --warning: #FF6B35;
            --error: #ff4757;
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 5px 20px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 100px;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Import Cairo font */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap');

        /* ===== UTILITY CLASSES ===== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .slide-in {
            animation: slideInRight 0.3s ease forwards;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* ===== LAYOUT COMPONENTS ===== */
        
        /* Language Toggle */
        .language-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(10, 36, 114, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid var(--accent-green);
            border-radius: 25px;
            padding: 8px 15px;
            display: flex;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }

        .lang-btn {
            background: transparent;
            border: none;
            color: var(--text-light);
            padding: 6px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 600;
            transition: var(--transition);
            outline: none;
        }

        .lang-btn:hover {
            background: rgba(0, 200, 150, 0.1);
            transform: translateY(-2px);
        }

        .lang-btn:focus-visible {
            box-shadow: 0 0 0 3px rgba(0, 200, 150, 0.3);
        }

        .lang-btn.active {
            background: var(--accent-green);
            color: var(--dark-bg);
            font-weight: 700;
        }

        /* Offline Indicator */
        .offline-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(212, 175, 55, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--dark-bg);
            font-weight: 600;
            font-size: 14px;
            box-shadow: var(--shadow-md);
        }

        /* Academy Header */
        .academy-header {
            background: linear-gradient(135deg, var(--primary-blue), #000033);
            padding: 60px 20px 40px;
            text-align: center;
            border-bottom: 5px solid var(--accent-green);
            position: relative;
            overflow: hidden;
        }

        .academy-header::before {
            content: 'ğŸ¦…';
            font-size: 150px;
            position: absolute;
            opacity: 0.08;
            top: 50%;
            left: 10%;
            transform: translateY(-50%);
            animation: float 20s infinite linear;
        }

        .academy-header::after {
            content: 'ğŸ¦…';
            font-size: 150px;
            position: absolute;
            opacity: 0.08;
            bottom: 10%;
            right: 10%;
            animation: float 15s infinite linear reverse;
        }

        .sovereignty-badge {
            display: inline-block;
            background: linear-gradient(45deg, var(--primary-blue), var(--accent-green));
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 700;
            margin: 25px 0;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .sovereignty-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 200, 150, 0.4);
        }

        .quran-verse {
            font-size: 22px;
            color: var(--gold);
            margin: 25px auto;
            max-width: 700px;
            font-family: 'Cairo', serif;
            line-height: 1.8;
            padding: 20px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: var(--radius-lg);
            border-right: 4px solid var(--gold);
        }

        .verse-ref {
            font-size: 16px;
            color: var(--text-muted);
            margin-top: 10px;
            font-style: italic;
        }

        /* Main Layout */
        .academy-container {
            display: grid;
            grid-template-columns: minmax(280px, 320px) 1fr;
            gap: 30px;
            padding: 30px;
            max-width: 1600px;
            margin: 0 auto;
            min-height: calc(100vh - 300px);
        }

        @media (max-width: 1200px) {
            .academy-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        /* Sidebar */
        .academy-sidebar {
            background: var(--dark-card);
            border-radius: var(--radius-lg);
            padding: 30px;
            border: 3px solid var(--accent-green);
            height: fit-content;
            position: sticky;
            top: 30px;
            box-shadow: var(--shadow-md);
        }

        .student-profile {
            text-align: center;
            padding-bottom: 25px;
            border-bottom: 2px solid var(--dark-border);
            margin-bottom: 25px;
        }

        .student-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--primary-blue));
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 42px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .student-avatar:hover {
            transform: scale(1.05);
            border-color: var(--accent-green);
        }

        .progress-container {
            margin: 25px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text-muted);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--dark-border);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--primary-blue));
            border-radius: 5px;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 2s infinite;
        }

        .student-level {
            background: linear-gradient(45deg, var(--gold), #b8941f);
            color: var(--dark-bg);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            display: inline-block;
            margin-top: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* Navigation */
        .nav-modules {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }

        .module-btn {
            padding: 18px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: var(--radius-md);
            color: var(--text-light);
            text-align: right;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Cairo', sans-serif;
            font-size: 17px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
            outline: none;
            border: 2px solid transparent;
        }

        .module-btn:hover {
            background: rgba(0, 200, 150, 0.15);
            transform: translateX(-5px);
            border-color: rgba(0, 200, 150, 0.3);
        }

        .module-btn:focus-visible {
            border-color: var(--accent-green);
            box-shadow: 0 0 0 3px rgba(0, 200, 150, 0.2);
        }

        .module-btn.active {
            background: linear-gradient(90deg, var(--accent-green), rgba(0, 200, 150, 0.3));
            border-right: 5px solid var(--action-orange);
            box-shadow: var(--shadow-sm);
        }

        .module-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .module-lessons {
            color: var(--text-muted);
            font-size: 13px;
        }

        /* Main Content */
        .academy-main {
            background: var(--dark-card);
            border-radius: var(--radius-lg);
            padding: 40px;
            border: 3px solid var(--dark-border);
            min-height: 600px;
            box-shadow: var(--shadow-md);
        }

        .module-header {
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 2px solid var(--dark-border);
        }

        .module-title {
            font-size: 36px;
            color: var(--accent-green);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .module-subtitle {
            color: var(--text-muted);
            font-size: 20px;
            line-height: 1.6;
        }

        /* Lesson Content */
        .lesson-content {
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .lesson-content h3 {
            color: var(--action-orange);
            margin: 30px 0 20px;
            font-size: 28px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 107, 53, 0.3);
        }

        .lesson-content p {
            margin-bottom: 25px;
            color: #e0e0e0;
        }

        .arabic-note {
            background: rgba(212, 175, 55, 0.15);
            border-right: 4px solid var(--gold);
            padding: 25px;
            border-radius: var(--radius-md);
            margin: 25px 0;
            font-family: 'Cairo', serif;
            font-size: 22px;
            line-height: 1.8;
            box-shadow: var(--shadow-sm);
        }

        /* Code Editor */
        .code-editor {
            background: #1e1e1e;
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin: 40px 0;
            border: 2px solid var(--dark-border);
            box-shadow: var(--shadow-lg);
        }

        .editor-header {
            background: #252525;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--dark-border);
        }

        .editor-title {
            font-family: 'Cairo', monospace;
            color: var(--accent-green);
            font-weight: 600;
            font-size: 18px;
        }

        .editor-controls {
            display: flex;
            gap: 12px;
        }

        .editor-btn {
            padding: 10px 20px;
            background: var(--primary-blue);
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-size: 15px;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            outline: none;
        }

        .editor-btn:hover {
            background: var(--primary-blue-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .editor-btn:active {
            transform: translateY(0);
        }

        .editor-btn:focus-visible {
            box-shadow: 0 0 0 3px rgba(10, 36, 114, 0.3);
        }

        .code-area {
            width: 100%;
            min-height: 350px;
            background: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Cascadia Code', 'Courier New', monospace;
            font-size: 16px;
            line-height: 1.6;
            padding: 25px;
            border: none;
            resize: vertical;
            outline: none;
            tab-size: 4;
            white-space: pre;
            overflow-x: auto;
        }

        .code-area:focus {
            box-shadow: inset 0 0 0 2px var(--accent-green);
        }

        .preview-container {
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid var(--dark-border);
        }

        .preview-area {
            width: 100%;
            min-height: 300px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius-md);
            padding: 25px;
            overflow: auto;
            color: #333;
            font-family: 'Cairo', sans-serif;
        }

        /* Exercises */
        .practice-section {
            background: rgba(10, 36, 114, 0.15);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin: 40px 0;
            border: 2px solid var(--primary-blue);
            box-shadow: var(--shadow-md);
        }

        .exercise {
            background: rgba(255, 255, 255, 0.07);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
            border-right: 4px solid var(--accent-green);
            transition: var(--transition);
        }

        .exercise:hover {
            transform: translateX(-5px);
            background: rgba(255, 255, 255, 0.1);
        }

        .exercise-header {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 20px;
        }

        .exercise-icon {
            font-size: 28px;
            color: var(--gold);
            flex-shrink: 0;
        }

        .exercise-content {
            flex: 1;
        }

        .exercise-content h4 {
            color: var(--accent-green);
            margin-bottom: 10px;
            font-size: 20px;
        }

        .exercise-content p {
            color: var(--text-muted);
            margin-bottom: 15px;
        }

        .exercise-hint {
            background: rgba(212, 175, 55, 0.1);
            border: 1px dashed var(--gold);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
            color: var(--gold);
        }

        .exercise-hint summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--gold-light);
        }

        /* Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .check-btn, .action-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--accent-green), var(--primary-blue));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            font-size: 16px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 180px;
            outline: none;
        }

        .check-btn:hover:not(:disabled), .action-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(135deg, var(--accent-green-light), var(--primary-blue-light));
        }

        .check-btn:active:not(:disabled), .action-btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .check-btn:focus-visible, .action-btn:focus-visible {
            box-shadow: 0 0 0 3px rgba(0, 200, 150, 0.3);
        }

        .check-btn:disabled, .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, var(--action-orange), #ff8c00);
        }

        .action-btn.secondary:hover:not(:disabled) {
            background: linear-gradient(135deg, var(--action-orange-light), #ffa500);
        }

        /* Achievements */
        .achievements-section {
            max-width: 1400px;
            margin: 60px auto;
            padding: 0 30px;
        }

        .section-title {
            text-align: center;
            color: var(--accent-green);
            margin-bottom: 40px;
            font-size: 36px;
            position: relative;
            padding-bottom: 20px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-green), var(--primary-blue));
            border-radius: 2px;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .achievement-card {
            background: var(--dark-card);
            border-radius: var(--radius-lg);
            padding: 25px;
            text-align: center;
            border: 2px solid var(--dark-border);
            transition: var(--transition);
            cursor: pointer;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .achievement-card:hover {
            transform: translateY(-5px);
            border-color: rgba(212, 175, 55, 0.5);
            box-shadow: var(--shadow-md);
        }

        .achievement-card.earned {
            border-color: var(--gold);
            box-shadow: 0 8px 32px rgba(212, 175, 55, 0.2);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent);
        }

        .achievement-card.earned:hover {
            box-shadow: 0 12px 40px rgba(212, 175, 55, 0.3);
        }

        .achievement-icon {
            font-size: 48px;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .achievement-card:hover .achievement-icon {
            transform: scale(1.1);
        }

        .achievement-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .achievement-desc {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .achievement-status {
            font-size: 14px;
            font-weight: 600;
            padding: 6px 15px;
            border-radius: 15px;
            display: inline-block;
        }

        .achievement-status.earned {
            background: rgba(212, 175, 55, 0.2);
            color: var(--gold);
        }

        .achievement-status.locked {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-muted);
        }

        /* Certificate */
        .certificate-section {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            border-radius: var(--radius-lg);
            padding: 50px;
            text-align: center;
            border: 5px solid var(--gold);
            margin: 60px auto;
            max-width: 1400px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .certificate-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle, rgba(0, 200, 150, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveBackground 20s linear infinite;
            z-index: 0;
        }

        .certificate-content {
            position: relative;
            z-index: 1;
        }

        .certificate-title {
            font-size: 42px;
            color: var(--gold);
            margin-bottom: 25px;
            font-family: 'Cairo', serif;
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.3);
        }

        .certificate-text {
            font-size: 20px;
            margin: 20px 0;
            color: var(--text-light);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.8;
        }

        .certificate-progress {
            font-size: 24px;
            color: var(--accent-green);
            margin: 30px 0;
            font-weight: 700;
        }

        .generate-certificate {
            padding: 18px 40px;
            background: linear-gradient(135deg, var(--gold), #b8941f);
            color: var(--dark-bg);
            border: none;
            border-radius: var(--radius-lg);
            font-size: 20px;
            font-weight: 800;
            cursor: pointer;
            margin-top: 30px;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 15px;
            outline: none;
            border: 3px solid transparent;
        }

        .generate-certificate:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.4);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .generate-certificate:focus-visible {
            border-color: white;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
        }

        .generate-certificate:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* Footer */
        .academy-footer {
            text-align: center;
            padding: 60px 20px;
            border-top: 3px solid var(--dark-border);
            margin-top: 80px;
            background: linear-gradient(180deg, rgba(10, 36, 114, 0.1), transparent);
        }

        .footer-logo {
            font-size: 64px;
            margin-bottom: 25px;
            animation: float 6s ease-in-out infinite;
        }

        .footer-title {
            font-size: 32px;
            color: var(--accent-green);
            margin-bottom: 20px;
        }

        .footer-description {
            color: var(--text-muted);
            max-width: 700px;
            margin: 20px auto 40px;
            line-height: 1.8;
            font-size: 18px;
        }

        .export-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .export-btn {
            padding: 15px 30px;
            background: transparent;
            border: 2px solid var(--accent-green);
            color: var(--accent-green);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            outline: none;
        }

        .export-btn:hover {
            background: var(--accent-green);
            color: var(--dark-bg);
            transform: translateY(-2px);
        }

        .export-btn:focus-visible {
            box-shadow: 0 0 0 3px rgba(0, 200, 150, 0.3);
        }

        .footer-note {
            margin-top: 40px;
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .academy-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .academy-sidebar {
                position: static;
                margin-bottom: 20px;
            }
            
            .module-title {
                font-size: 32px;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .academy-header {
                padding: 40px 15px 30px;
            }
            
            .academy-main, .academy-sidebar {
                padding: 25px;
            }
            
            .module-title {
                font-size: 28px;
            }
            
            .lesson-content {
                font-size: 16px;
            }
            
            .code-area {
                font-size: 14px;
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .check-btn, .action-btn {
                width: 100%;
                min-width: auto;
            }
            
            .export-options {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .certificate-section {
                padding: 30px 20px;
                margin: 40px 20px;
            }
            
            .certificate-title {
                font-size: 32px;
            }
        }

        @media (max-width: 480px) {
            .language-toggle {
                top: 10px;
                left: 10px;
                padding: 6px 12px;
            }
            
            .offline-indicator {
                top: 10px;
                right: 10px;
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .sovereignty-badge {
                font-size: 16px;
                padding: 10px 20px;
            }
            
            .quran-verse {
                font-size: 18px;
                padding: 15px;
            }
            
            .achievements-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(200%);
            }
        }

        @keyframes moveBackground {
            0% {
                transform: translate(0, 0);
            }
            100% {
                transform: translate(50px, 50px);
            }
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-bg);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--accent-green), var(--primary-blue));
            border-radius: 6px;
            border: 3px solid var(--dark-bg);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--accent-green-light), var(--primary-blue-light));
        }

        ::-webkit-scrollbar-corner {
            background: var(--dark-bg);
        }

        /* ===== NOTIFICATIONS ===== */
        .notification {
            position: fixed;
            top: 90px;
            right: 20px;
            padding: 18px 28px;
            border-radius: var(--radius-md);
            z-index: 2000;
            font-family: 'Cairo', sans-serif;
            font-weight: 600;
            font-size: 16px;
            animation: slideInRight 0.3s ease forwards;
            box-shadow: var(--shadow-lg);
            max-width: 400px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification.success {
            background: rgba(0, 200, 150, 0.95);
            color: white;
        }

        .notification.error {
            background: rgba(255, 71, 87, 0.95);
            color: white;
        }

        .notification.warning {
            background: rgba(255, 107, 53, 0.95);
            color: white;
        }

        .notification.info {
            background: rgba(10, 36, 114, 0.95);
            color: white;
        }

        .notification-icon {
            font-size: 24px;
        }

        .notification-close {
            margin-left: auto;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .notification-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* ===== LOADING STATES ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-green);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== TOOLTIPS ===== */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-card);
            color: var(--text-light);
            text-align: center;
            padding: 10px;
            border-radius: var(--radius-sm);
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            border: 1px solid var(--dark-border);
            box-shadow: var(--shadow-md);
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark-card) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Offline Status Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <span>âš¡</span>
        <span>ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</span>
    </div>

    <!-- Language Toggle -->
    <div class="language-toggle">
        <button class="lang-btn active" onclick="setLanguage('ar')" aria-label="Switch to Arabic">
            Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        </button>
        <button class="lang-btn" onclick="setLanguage('en')" aria-label="Switch to English">
            English
        </button>
    </div>

    <!-- Academy Header -->
    <header class="academy-header" role="banner">
        <h1 style="font-size: 52px; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
            Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©
        </h1>
        <div class="sovereignty-badge" role="status">
            Hydara Academy - ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
        </div>
        
        <div class="quran-verse" id="quranVerse">
            "Ø§Ù‚Ù’Ø±ÙØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚ÙØŒ Ø®ÙÙ„ÙÙ‚Ù Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù…ÙÙ†Ù’ Ø¹ÙÙ„ÙÙ‚ÙØŒ Ø§Ù‚Ù’Ø±ÙØ£Ù’ ÙˆÙØ±ÙØ¨ÙÙ‘ÙƒÙ Ø§Ù„Ù’Ø£ÙÙƒÙ’Ø±ÙÙ…ÙØŒ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù Ø¨ÙØ§Ù„Ù’Ù‚ÙÙ„ÙÙ…ÙØŒ Ø¹ÙÙ„ÙÙ‘Ù…Ù Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù…ÙØ§ Ù„ÙÙ…Ù’ ÙŠÙØ¹Ù’Ù„ÙÙ…Ù’"
            <div class="verse-ref">Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù„Ù‚ØŒ Ø§Ù„Ø¢ÙŠØ§Øª 1-5</div>
        </div>
        
        <p style="max-width: 900px; margin: 25px auto; color: var(--text-muted); font-size: 20px; line-height: 1.8;">
            Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª. ØªØ¹Ù„Ù…ØŒ Ù…Ø§Ø±Ø³ØŒ ÙˆØ§Ø¨Ù†Ù Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¨Ø£ÙŠ ÙˆÙ‚ØªØŒ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†.
            <br>
            <span style="color: var(--accent-green); font-weight: 600;">
                Ù…Ù„Ù HTML ÙˆØ§Ø­Ø¯ â€¢ Ù„Ø§ ÙŠØªØªØ¨Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª â€¢ Ù…Ø¬Ø§Ù†ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§ â€¢ ÙŠØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
            </span>
        </p>
    </header>

    <!-- Main Content Area -->
    <div class="academy-container">
        <!-- Sidebar Navigation -->
        <aside class="academy-sidebar" role="complementary" aria-label="Ù…Ù„Ø§Ø­Ø© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©">
            <div class="student-profile">
                <div class="student-avatar" id="studentAvatar" role="img" aria-label="ØµÙˆØ±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨">
                    ğŸš€
                </div>
                <h3 id="studentName" style="font-size: 24px; margin: 10px 0 5px;">
                    Ø·Ø§Ù„Ø¨ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
                </h3>
                <p style="color: var(--text-muted); font-size: 16px;" id="studentUsername">
                    @Ù…Ø¨Ø±Ù…Ø¬_Ø¹Ø±Ø¨ÙŠ
                </p>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" role="progressbar" 
                             aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                
                <div class="student-level" id="studentLevel">
                    Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1: Ø§Ù„Ù…Ø¨ØªØ¯Ø¦
                </div>
            </div>

            <nav class="nav-modules" id="moduleList" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³">
                <!-- Modules loaded dynamically -->
            </nav>

            <div style="margin-top: 40px;">
                <h4 style="color: var(--accent-green); margin-bottom: 20px; font-size: 20px;">
                    ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ
                </h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: var(--radius-md); text-align: center; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 28px; color: var(--accent-green); font-weight: 700;" id="completedLessons">
                            0
                        </div>
                        <div style="font-size: 14px; color: var(--text-muted); margin-top: 5px;">
                            Ø¯Ø±ÙˆØ³ Ù…ÙƒØªÙ…Ù„Ø©
                        </div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: var(--radius-md); text-align: center; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 28px; color: var(--gold); font-weight: 700;" id="totalPoints">
                            0
                        </div>
                        <div style="font-size: 14px; color: var(--text-muted); margin-top: 5px;">
                            Ù†Ù‚Ø·Ø© Ù…ÙƒØªØ³Ø¨Ø©
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--dark-border);">
                    <button class="export-btn" onclick="exportProgress()" style="width: 100%; justify-content: center; margin-bottom: 10px;">
                        ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
                    </button>
                    <button class="export-btn" onclick="showBackupMenu()" style="width: 100%; justify-content: center;">
                        âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø®
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="academy-main" role="main" id="mainContent">
            <div id="moduleContent">
                <!-- Module content loaded dynamically -->
            </div>
        </main>
    </div>

    <!-- Achievements Section -->
    <section class="achievements-section" aria-labelledby="achievements-title">
        <h2 class="section-title" id="achievements-title">
            ğŸ† Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ
        </h2>
        <div class="achievements-grid" id="achievementsGrid">
            <!-- Achievements loaded dynamically -->
        </div>
    </section>

    <!-- Certificate Section -->
    <section class="certificate-section" aria-labelledby="certificate-title">
        <div class="certificate-content">
            <div class="footer-logo">ğŸ¦…</div>
            <h2 class="certificate-title" id="certificate-title">
                Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
            </h2>
            <p class="certificate-text">
                Ø¹Ù†Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±ÙˆØ³ØŒ Ø³ØªØªÙ„Ù‚Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø© Ù…Ù† Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© ØªØ«Ø¨Øª Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø¨Ù†Ø§Ø¡ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª.
            </p>
            <div class="certificate-progress" id="certificateProgress">
                0% Ù…ÙƒØªÙ…Ù„ - ÙˆØ§ØµÙ„ Ø§Ù„ØªØ¹Ù„Ù…!
            </div>
            <button class="generate-certificate" onclick="generateCertificate()" id="certificateBtn" disabled>
                <span>ğŸ“</span>
                <span>ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</span>
            </button>
        </div>
    </section>

    <!-- Academy Footer -->
    <footer class="academy-footer" role="contentinfo">
        <div class="footer-logo" aria-hidden="true">ğŸ¦…</div>
        <h3 class="footer-title">
            Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© - Hydara Academy
        </h3>
        <p class="footer-description">
            Ø¬Ø²Ø¡ Ù…Ù† Ù…Ø¨Ø§Ø¯Ø±Ø© Ø­ÙŠØ¯Ø±Ø© Ø³ÙˆÙØª - Ø§Ù„ØªØ­Ø§Ù„Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ù„ØµÙ…ÙˆØ¯ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ<br>
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø­Ù‚ Ù„Ù„Ø¬Ù…ÙŠØ¹
        </p>
        
        <div class="export-options">
            <button class="export-btn" onclick="exportAsHTML()">
                <span>ğŸ“„</span>
                <span>Ø­ÙØ¸ ÙƒÙ…Ù„Ù HTML</span>
            </button>
            <button class="export-btn" onclick="shareAcademy()">
                <span>ğŸ”—</span>
                <span>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</span>
            </button>
            <button class="export-btn" onclick="importProgress()">
                <span>ğŸ“‚</span>
                <span>Ø§Ø³ØªÙŠØ±Ø§Ø¯ ØªÙ‚Ø¯Ù… Ø³Ø§Ø¨Ù‚</span>
            </button>
            <button class="export-btn" onclick="resetProgress()">
                <span>ğŸ”„</span>
                <span>Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯</span>
            </button>
        </div>
        
        <div class="footer-note">
            <p>Ù…Ù„Ù HTML ÙˆØ§Ø­Ø¯ | ÙŠØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª | Ù„Ø§ ÙŠØªØªØ¨Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª | Ù…Ø¬Ø§Ù†ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§</p>
            <p>Â© 2024 Ø­ÙŠØ¯Ø±Ø© Ø³ÙˆÙØª - Ø§Ù„ØªØ­Ø§Ù„Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ù„ØµÙ…ÙˆØ¯ Ø§Ù„Ø±Ù‚Ù…ÙŠ</p>
        </div>
    </footer>

    <!-- Backup Menu Modal (Hidden by default) -->
    <div id="backupModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; justify-content: center; align-items: center; padding: 20px;">
        <div style="background: var(--dark-card); padding: 40px; border-radius: var(--radius-lg); max-width: 500px; width: 100%; border: 3px solid var(--accent-green);">
            <h3 style="color: var(--accent-green); margin-bottom: 25px; text-align: center; font-size: 24px;">
                Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            </h3>
            <div style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 30px;">
                <button class="check-btn" onclick="exportProgress()">
                    ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
                </button>
                <button class="export-btn" onclick="importProgress()">
                    ğŸ“‚ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                </button>
                <button class="action-btn secondary" onclick="clearAllBackups()">
                    ğŸ—‘ï¸ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ù†Ø³Ø®
                </button>
            </div>
            <button class="export-btn" onclick="hideBackupMenu()" style="width: 100%; justify-content: center;">
                Ø¥ØºÙ„Ø§Ù‚
            </button>
        </div>
    </div>

    <script>
        /**
         * Hydara Academy - Enhanced Single File Coding Education Platform
         * @version 2.0.0
         * @description Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
         */
        
        'use strict';

        class HydaraAcademy {
            constructor() {
                this.currentLanguage = 'ar';
                this.currentModule = 'welcome';
                this.isInitialized = false;
                this.codeEditorDebounce = null;
                
                // Student data structure
                this.student = {
                    name: 'Ø·Ø§Ù„Ø¨ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©',
                    username: '@Ù…Ø¨Ø±Ù…Ø¬_Ø¹Ø±Ø¨ÙŠ',
                    avatar: 'ğŸš€',
                    level: 1,
                    points: 0,
                    completedLessons: 0,
                    progress: 0,
                    lastActive: new Date().toISOString(),
                    version: '2.0.0'
                };
                
                // Curriculum modules
                this.modules = [
                    {
                        id: 'welcome',
                        title: { ar: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©', en: 'Welcome to Academy' },
                        icon: 'ğŸ‘‹',
                        lessons: 1,
                        completed: true,
                        description: { 
                            ar: 'Ø¨Ø¯Ø§ÙŠØ© Ø±Ø­Ù„Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ§Ù„Ø¥Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ÙŠØ© Ø§Ù„ØªØ¹Ù„Ù…', 
                            en: 'Start your digital sovereignty journey and explore learning methodology' 
                        },
                        unlocked: true,
                        order: 1
                    },
                    {
                        id: 'html_basics',
                        title: { ar: 'Ø£Ø³Ø§Ø³ÙŠØ§Øª HTML', en: 'HTML Fundamentals' },
                        icon: 'ğŸ“„',
                        lessons: 6,
                        completed: false,
                        description: { 
                            ar: 'Ù„ØºØ© Ø¨Ù†Ø§Ø¡ ØµÙØ­Ø§Øª Ø§Ù„ÙˆÙŠØ¨ - ØªØ¹Ù„Ù… Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ù‚Ù…ÙŠ', 
                            en: 'The language of web pages - Learn digital content structuring' 
                        },
                        unlocked: true,
                        order: 2
                    },
                    {
                        id: 'css_styling',
                        title: { ar: 'ØªØµÙ…ÙŠÙ… ÙˆØªÙ†Ø³ÙŠÙ‚ CSS', en: 'CSS Styling & Design' },
                        icon: 'ğŸ¨',
                        lessons: 7,
                        completed: false,
                        description: { 
                            ar: 'ØªÙ†Ø³ÙŠÙ‚ ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ - ÙÙ† ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø§Øª Ø¬Ø°Ø§Ø¨Ø©', 
                            en: 'Styling and designing websites - The art of turning text into beautiful interfaces' 
                        },
                        unlocked: false,
                        order: 3
                    },
                    {
                        id: 'javascript_logic',
                        title: { ar: 'Ù…Ù†Ø·Ù‚ ÙˆØªÙØ§Ø¹Ù„ÙŠØ© JavaScript', en: 'JavaScript Logic & Interactivity' },
                        icon: 'ğŸ§ ',
                        lessons: 8,
                        completed: false,
                        description: { 
                            ar: 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ - Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©', 
                            en: 'Adding interactivity and intelligence to websites - Programming dynamic behaviors' 
                        },
                        unlocked: false,
                        order: 4
                    },
                    {
                        id: 'local_storage',
                        title: { ar: 'Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙˆØ§Ù„Ø°Ø§ÙƒØ±Ø©', en: 'Local Storage & Memory' },
                        icon: 'ğŸ’¾',
                        lessons: 5,
                        completed: false,
                        description: { 
                            ar: 'Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª - Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ¹Ù…Ù„ ÙÙŠ Ø£ÙŠ Ø¸Ø±Ù', 
                            en: 'Saving data without internet - Building apps that work in any situation' 
                        },
                        unlocked: false,
                        order: 5
                    },
                    {
                        id: 'single_file_apps',
                        title: { ar: 'ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„ÙˆØ§Ø­Ø¯ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©', en: 'Complete Single File Applications' },
                        icon: 'ğŸ¦…',
                        lessons: 6,
                        completed: false,
                        description: { 
                            ar: 'Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙƒØ§Ù…Ù„Ø© ÙÙŠ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ - Ù‚Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©', 
                            en: 'Building complete applications in one file - The peak of digital sovereignty' 
                        },
                        unlocked: false,
                        order: 6
                    }
                ];
                
                // Achievements system
                this.achievements = [
                    { 
                        id: 'first_lesson', 
                        title: { ar: 'Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©', en: 'First Step in the Journey' }, 
                        icon: 'ğŸ‘£', 
                        earned: true,
                        points: 10,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø£ÙˆÙ„ Ø¯Ø±Ø³ ÙÙŠ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©', en: 'Complete the first academy lesson and start your digital sovereignty journey' }
                    },
                    { 
                        id: 'html_expert', 
                        title: { ar: 'Ø®Ø¨ÙŠØ± Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹', en: 'Website Building Expert' }, 
                        icon: 'ğŸ‘‘', 
                        earned: false,
                        points: 50,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ HTML ÙˆØ£ØªÙ‚Ù† Ù„ØºØ© Ø¨Ù†Ø§Ø¡ ØµÙØ­Ø§Øª Ø§Ù„ÙˆÙŠØ¨', en: 'Complete all HTML lessons and master web page building language' }
                    },
                    { 
                        id: 'css_artist', 
                        title: { ar: 'ÙÙ†Ø§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ù‚Ù…ÙŠ', en: 'Digital Design Artist' }, 
                        icon: 'ğŸ¨', 
                        earned: false,
                        points: 75,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ CSS ÙˆØ£Ø¨Ø¯Ø¹ ÙÙŠ ØªØµÙ…ÙŠÙ… ÙˆØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª', en: 'Complete all CSS lessons and excel in interface design and styling' }
                    },
                    { 
                        id: 'js_wizard', 
                        title: { ar: 'Ø³Ø§Ø­Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©', en: 'Interactivity Wizard' }, 
                        icon: 'ğŸ§™', 
                        earned: false,
                        points: 100,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ JavaScript ÙˆØ£ØªÙ‚Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ù„Ù„ÙˆÙŠØ¨', en: 'Complete all JavaScript lessons and master adding intelligence to the web' }
                    },
                    { 
                        id: 'offline_master', 
                        title: { ar: 'Ø³ÙŠØ¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª', en: 'Offline Applications Master' }, 
                        icon: 'ğŸ“±', 
                        earned: false,
                        points: 125,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¯Ø±ÙˆØ³ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„', en: 'Complete local storage lessons and build offline applications' }
                    },
                    { 
                        id: 'sovereignty_champion', 
                        title: { ar: 'Ø¨Ø·Ù„ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©', en: 'Digital Sovereignty Champion' }, 
                        icon: 'ğŸ¦…', 
                        earned: false,
                        points: 150,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¯Ø±Ø³ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„ÙˆØ§Ø­Ø¯ ÙˆØ£ØªÙ‚Ù† Ù‚Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©', en: 'Complete single file apps lesson and master the peak of technical sovereignty' }
                    },
                    { 
                        id: 'academy_graduate', 
                        title: { ar: 'Ø®Ø±ÙŠØ¬ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©', en: 'Hydara Academy Graduate' }, 
                        icon: 'ğŸ“', 
                        earned: false,
                        points: 250,
                        description: { ar: 'Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙˆØ­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©', en: 'Complete all academy lessons and earn the digital sovereignty certificate' }
                    }
                ];
                
                this.init();
            }
            
            /**
             * Initialize the academy
             */
            init() {
                this.checkOfflineStatus();
                this.loadProgress();
                this.setupEventListeners();
                this.renderModules();
                this.renderAchievements();
                this.updateStudentInfo();
                this.loadModule('welcome');
                this.isInitialized = true;
                
                console.log('%cğŸ¦… Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2.0', 
                    'color: #00C896; font-size: 24px; font-weight: bold; text-shadow: 0 2px 10px rgba(0,200,150,0.3);');
                console.log('%cØ£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª | Ù…Ù„Ù ÙˆØ§Ø­Ø¯ | Ù…Ø¬Ø§Ù†ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§', 
                    'color: #FF6B35; font-size: 14px;');
                
                // Auto-save every 30 seconds
                setInterval(() => this.saveProgress(), 30000);
            }
            
            /**
             * Check and display offline status
             */
            checkOfflineStatus() {
                const indicator = document.getElementById('offlineIndicator');
                if (!indicator) return;
                
                const isOnline = navigator.onLine;
                if (!isOnline) {
                    indicator.innerHTML = '<span>ğŸ“´</span><span>ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</span>';
                    this.showNotification('âš¡ Ø£Ù†Øª ØªØ¹Ù…Ù„ ÙÙŠ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ - Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„', 'info');
                } else {
                    indicator.innerHTML = '<span>âš¡</span><span>ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª (Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)</span>';
                }
                
                // Listen for online/offline events
                window.addEventListener('online', () => {
                    indicator.innerHTML = '<span>âš¡</span><span>ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª (Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)</span>';
                });
                
                window.addEventListener('offline', () => {
                    indicator.innerHTML = '<span>ğŸ“´</span><span>ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</span>';
                    this.showNotification('âš¡ Ø£Ù†Øª ØªØ¹Ù…Ù„ ÙÙŠ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ - Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„', 'info');
                });
            }
            
            /**
             * Set up global event listeners
             */
            setupEventListeners() {
                // Handle beforeunload for unsaved changes
                window.addEventListener('beforeunload', (e) => {
                    if (this.student.completedLessons > 0) {
                        this.saveProgress();
                    }
                });
                
                // Handle keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Ctrl+S to save
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault();
                        this.saveProgress();
                        this.showNotification('ğŸ’¾ ØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                    }
                    
                    // Escape to close modals
                    if (e.key === 'Escape') {
                        this.hideBackupMenu();
                    }
                });
                
                // Handle code editor input with debounce
                document.addEventListener('input', (e) => {
                    if (e.target.id === 'htmlCode') {
                        clearTimeout(this.codeEditorDebounce);
                        this.codeEditorDebounce = setTimeout(() => {
                            this.updateCodePreview();
                        }, 500);
                    }
                });
            }
            
            /**
             * Change application language
             * @param {string} lang - Language code ('ar' or 'en')
             */
            setLanguage(lang) {
                if (this.currentLanguage === lang) return;
                
                this.currentLanguage = lang;
                
                // Update button states
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.toggle('active', 
                        (lang === 'ar' && btn.textContent.includes('Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©')) ||
                        (lang === 'en' && btn.textContent.includes('English'))
                    );
                });
                
                // Update Quran verse
                this.updateQuranVerse();
                
                // Update all dynamic content
                this.renderModules();
                this.renderAchievements();
                this.updateStudentInfo();
                this.loadModule(this.currentModule);
                
                // Show language change notification
                const message = lang === 'ar' 
                    ? 'ğŸŒ ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' 
                    : 'ğŸŒ Switched to English language';
                this.showNotification(message, 'info');
            }
            
            /**
             * Update Quran verse based on current language
             */
            updateQuranVerse() {
                const verseEl = document.getElementById('quranVerse');
                if (!verseEl) return;
                
                if (this.currentLanguage === 'ar') {
                    verseEl.innerHTML = `
                        "Ø§Ù‚Ù’Ø±ÙØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚ÙØŒ Ø®ÙÙ„ÙÙ‚Ù Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù…ÙÙ†Ù’ Ø¹ÙÙ„ÙÙ‚ÙØŒ Ø§Ù‚Ù’Ø±ÙØ£Ù’ ÙˆÙØ±ÙØ¨ÙÙ‘ÙƒÙ Ø§Ù„Ù’Ø£ÙÙƒÙ’Ø±ÙÙ…ÙØŒ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù Ø¨ÙØ§Ù„Ù’Ù‚ÙÙ„ÙÙ…ÙØŒ Ø¹ÙÙ„ÙÙ‘Ù…Ù Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù…ÙØ§ Ù„ÙÙ…Ù’ ÙŠÙØ¹Ù’Ù„ÙÙ…Ù’"
                        <div class="verse-ref">Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù„Ù‚ØŒ Ø§Ù„Ø¢ÙŠØ§Øª 1-5</div>
                    `;
                } else {
                    verseEl.innerHTML = `
                        "Read in the name of your Lord who created, Created man from a clinging substance, Read, and your Lord is the most Generous, Who taught by the pen, Taught man that which he knew not"
                        <div class="verse-ref">Surah Al-Alaq, Verses 1-5</div>
                    `;
                }
            }
            
            /**
             * Render modules in sidebar
             */
            renderModules() {
                const moduleList = document.getElementById('moduleList');
                if (!moduleList) return;
                
                moduleList.innerHTML = '';
                
                // Sort modules by order
                const sortedModules = [...this.modules].sort((a, b) => a.order - b.order);
                
                sortedModules.forEach(module => {
                    if (!module.unlocked) return;
                    
                    const moduleBtn = document.createElement('button');
                    moduleBtn.className = `module-btn ${this.currentModule === module.id ? 'active' : ''}`;
                    moduleBtn.setAttribute('aria-label', module.title[this.currentLanguage]);
                    moduleBtn.setAttribute('aria-current', this.currentModule === module.id ? 'true' : 'false');
                    moduleBtn.innerHTML = `
                        <div style="display: flex; flex-direction: column; align-items: flex-end; flex: 1;">
                            <span style="font-size: 18px;">${module.title[this.currentLanguage]}</span>
                            <span class="module-lessons">${module.lessons} ${this.currentLanguage === 'ar' ? 'Ø¯Ø±Ø³' : 'lessons'}</span>
                        </div>
                        <div class="module-status">
                            <span class="module-icon">${module.icon}</span>
                            ${module.completed ? '<span style="color: var(--accent-green);">âœ…</span>' : ''}
                        </div>
                    `;
                    
                    moduleBtn.onclick = () => {
                        this.loadModule(module.id);
                        moduleBtn.focus();
                    };
                    
                    moduleList.appendChild(moduleBtn);
                });
            }
            
            /**
             * Load a module's content
             * @param {string} moduleId - ID of module to load
             */
            loadModule(moduleId) {
                this.currentModule = moduleId;
                this.renderModules();
                
                const content = document.getElementById('moduleContent');
                const mainContent = document.getElementById('mainContent');
                
                if (!content || !mainContent) return;
                
                // Add loading animation
                content.style.opacity = '0';
                mainContent.classList.add('loading');
                
                setTimeout(() => {
                    content.innerHTML = this.getModuleContent(moduleId);
                    content.style.opacity = '1';
                    mainContent.classList.remove('loading');
                    
                    // Update student's last active module
                    this.student.lastActiveModule = moduleId;
                    
                    // Scroll to top of content
                    content.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Initialize module-specific features
                    this.initModuleFeatures(moduleId);
                }, 300);
            }
            
            /**
             * Initialize module-specific features
             * @param {string} moduleId - Module ID
             */
            initModuleFeatures(moduleId) {
                switch(moduleId) {
                    case 'html_basics':
                        this.setupCodeEditor();
                        break;
                    case 'css_styling':
                        // Setup for CSS module
                        break;
                    case 'javascript_logic':
                        // Setup for JS module
                        break;
                }
            }
            
            /**
             * Get HTML content for a module
             * @param {string} moduleId - Module ID
             * @returns {string} HTML content
             */
            getModuleContent(moduleId) {
                const module = this.modules.find(m => m.id === moduleId);
                if (!module) return '<div class="arabic-note">Ø§Ù„ÙˆØ­Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</div>';
                
                const isArabic = this.currentLanguage === 'ar';
                
                switch(moduleId) {
                    case 'welcome':
                        return `
                            <div class="module-header">
                                <h1 class="module-title">
                                    <span>${module.icon}</span>
                                    <span>${module.title[this.currentLanguage]}</span>
                                </h1>
                                <p class="module-subtitle">${module.description[this.currentLanguage]}</p>
                            </div>
                            
                            <div class="lesson-content">
                                <div class="arabic-note">
                                    ${isArabic ? '"Ø§Ù„Ø¹Ù„Ù… ÙÙŠ Ø§Ù„ØµØºØ± ÙƒØ§Ù„Ù†Ù‚Ø´ ÙÙŠ Ø§Ù„Ø­Ø¬Ø±"' : '"Knowledge in youth is like carving in stone"'}
                                </div>
                                
                                <h3>${isArabic ? 'ğŸ¯ Ù…Ù‡Ù…ØªÙ†Ø§ ÙˆØ±Ø¤ÙŠØªÙ†Ø§' : 'ğŸ¯ Our Mission & Vision'}</h3>
                                <p>${isArabic ? 
                                    'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¨Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ ÙÙŠ Ø£ÙŠ Ø¸Ø±ÙØŒ Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø§ØªØµØ§Ù„ Ø¥Ù†ØªØ±Ù†Øª Ø¯Ø§Ø¦Ù… Ø£Ùˆ Ù…Ù†ØµØ§Øª Ø®Ø§Ø±Ø¬ÙŠØ©. Ù†Ø­Ù† Ù†Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø©.' : 
                                    'Hydara Academy aims to empower Arab youth with essential digital skills that work in any circumstance, without needing constant internet or external platforms. We believe digital sovereignty begins with knowledge and skill.'}</p>
                                
                                <h3>${isArabic ? 'ğŸš€ Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³ØªØªØ¹Ù„Ù…Ù‡ØŸ' : 'ğŸš€ What Will You Learn?'}</h3>
                                <ul style="margin: 20px 0 30px 20px; color: #e0e0e0;">
                                    <li style="margin-bottom: 10px;">${isArabic ? 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML, CSS, JavaScript' : 'Website programming with HTML, CSS, JavaScript'}</li>
                                    <li style="margin-bottom: 10px;">${isArabic ? 'Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª' : 'Building offline applications'}</li>
                                    <li style="margin-bottom: 10px;">${isArabic ? 'Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ' : 'Saving data locally on your device'}</li>
                                    <li style="margin-bottom: 10px;">${isArabic ? 'ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø±Ø¨ÙŠØ© Ù…ØªØ¬Ø§ÙˆØ¨Ø©' : 'Designing responsive Arabic user interfaces'}</li>
                                    <li>${isArabic ? 'Ù†Ø´Ø± Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ ÙÙŠ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ´ØºÙŠÙ„' : 'Publishing your projects in a single executable file'}</li>
                                </ul>
                                
                                <h3>${isArabic ? 'ğŸ’¡ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©' : 'ğŸ’¡ Academy Features'}</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 25px 0;">
                                    <div style="background: rgba(0,200,150,0.1); padding: 20px; border-radius: var(--radius-md); border: 1px solid rgba(0,200,150,0.2);">
                                        <div style="font-size: 24px; margin-bottom: 10px;">ğŸ¦…</div>
                                        <div style="font-weight: 600; color: var(--accent-green); margin-bottom: 10px;">${isArabic ? 'Ø¹Ù…Ù„ ÙƒØ§Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª' : 'Fully Offline Operation'}</div>
                                        <div style="font-size: 14px; color: var(--text-muted);">${isArabic ? 'ØªØ¹Ù„Ù… ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†ØŒ Ø¨Ø£ÙŠ ÙˆÙ‚ØªØŒ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„' : 'Learn anywhere, anytime, without connection'}</div>
                                    </div>
                                    <div style="background: rgba(212,175,55,0.1); padding: 20px; border-radius: var(--radius-md); border: 1px solid rgba(212,175,55,0.2);">
                                        <div style="font-size: 24px; margin-bottom: 10px;">ğŸ†</div>
                                        <div style="font-weight: 600; color: var(--gold); margin-bottom: 10px;">${isArabic ? 'Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª' : 'Rewards System'}</div>
                                        <div style="font-size: 14px; color: var(--text-muted);">${isArabic ? 'Ø§ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ù…Ø¹ ØªÙ‚Ø¯Ù…Ùƒ' : 'Earn points and achievements as you progress'}</div>
                                    </div>
                                    <div style="background: rgba(10,36,114,0.1); padding: 20px; border-radius: var(--radius-md); border: 1px solid rgba(10,36,114,0.2);">
                                        <div style="font-size: 24px; margin-bottom: 10px;">ğŸ’¾</div>
                                        <div style="font-weight: 600; color: var(--primary-blue); margin-bottom: 10px;">${isArabic ? 'Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ' : 'Auto Save'}</div>
                                        <div style="font-size: 14px; color: var(--text-muted);">${isArabic ? 'Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ' : 'Automatically save your progress on your device'}</div>
                                    </div>
                                </div>
                                
                                <div class="practice-section">
                                    <h3 style="color: var(--action-orange);">${isArabic ? 'ğŸ¯ Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ' : 'ğŸ¯ Start Your Journey'}</h3>
                                    <p>${isArabic ? 'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ø¯Ù†Ø§Ù‡ Ù„ØªØ¨Ø¯Ø£ Ø£ÙˆÙ„ Ø¯Ø±Ø³ ÙÙŠ Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©:' : 'Click the button below to start your first lesson in your journey to digital sovereignty:'}</p>
                                    <div class="action-buttons">
                                        <button class="check-btn" onclick="academy.completeLesson()">
                                            ${isArabic ? 'âœ… Ø£ÙƒÙ…Ù„ Ø¯Ø±Ø³ Ø§Ù„ØªØ±Ø­ÙŠØ¨' : 'âœ… Complete Welcome Lesson'}
                                        </button>
                                        <button class="action-btn secondary" onclick="academy.loadModule('html_basics')">
                                            ${isArabic ? 'â© Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ HTML' : 'â© Jump to HTML'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                    case 'html_basics':
                        return `
                            <div class="module-header">
                                <h1 class="module-title">
                                    <span>${module.icon}</span>
                                    <span>${module.title[this.currentLanguage]}</span>
                                </h1>
                                <p class="module-subtitle">${module.description[this.currentLanguage]}</p>
                            </div>
                            
                            <div class="lesson-content">
                                <h3>${isArabic ? 'Ù…Ø§ Ù‡ÙŠ Ù„ØºØ© HTMLØŸ' : 'What is HTML Language?'}</h3>
                                <p>${isArabic ? 
                                    'HTML (Ù„ØºØ© ØªØ±Ù…ÙŠØ² Ø§Ù„Ù†Øµ Ø§Ù„ÙØ§Ø¦Ù‚) Ù‡ÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ Ù„Ù„ÙˆÙŠØ¨. ÙƒÙ„ Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªØ±Ø§Ù‡ Ù…Ø¨Ù†ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML. Ø¥Ù†Ù‡Ø§ Ø§Ù„Ù„ØºØ© Ø§Ù„ØªÙŠ ØªØ®Ø¨Ø± Ø§Ù„Ù…ØªØµÙØ­ ÙƒÙŠÙ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰.' : 
                                    'HTML (HyperText Markup Language) is the backbone of the web. Every website you see is built with HTML. It\'s the language that tells the browser how to display content.'}</p>
                                
                                <div class="arabic-note">
                                    ${isArabic ? 
                                    'HTML Ù„ÙŠØ³Øª Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø¨Ù„ Ù‡ÙŠ Ù„ØºØ© ØªØ±Ù…ÙŠØ² (Markup) ØªØ³ØªØ®Ø¯Ù… Ù„ÙˆØµÙ Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙŠØ¨.' : 
                                    'HTML is not a programming language, but a markup language used to describe the structure of content on the web.'}
                                </div>
                                
                                <div class="code-editor">
                                    <div class="editor-header">
                                        <div class="editor-title">index.html</div>
                                        <div class="editor-controls">
                                            <button class="editor-btn" onclick="runCode()" aria-label="ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯">
                                                <span>â–¶ï¸</span>
                                                <span>${isArabic ? 'ØªØ´ØºÙŠÙ„' : 'Run'}</span>
                                            </button>
                                            <button class="editor-btn" onclick="resetCode()" aria-label="Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙˆØ¯">
                                                <span>ğŸ”„</span>
                                                <span>${isArabic ? 'Ø¥Ø¹Ø§Ø¯Ø©' : 'Reset'}</span>
                                            </button>
                                            <button class="editor-btn" onclick="formatCode()" aria-label="ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯">
                                                <span>âœ¨</span>
                                                <span>${isArabic ? 'ØªÙ†Ø³ÙŠÙ‚' : 'Format'}</span>
                                            </button>
                                        </div>
                                    </div>
                                    <textarea class="code-area" id="htmlCode" spellcheck="false" aria-label="Ù…Ø­Ø±Ø± ÙƒÙˆØ¯ HTML" 
                                              placeholder="${isArabic ? 'Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ HTML Ù‡Ù†Ø§...' : 'Write HTML code here...'}">
<!DOCTYPE html>
<html lang="${isArabic ? 'ar' : 'en'}" dir="${isArabic ? 'rtl' : 'ltr'}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${isArabic ? 'Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„ | Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'My First Site | Hydara Academy'}</title>
    <style>
        body {
            font-family: ${isArabic ? "'Cairo', 'Segoe UI', sans-serif" : "Arial, sans-serif"};
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
            color: #333;
            line-height: 1.8;
        }
        .header {
            background: linear-gradient(135deg, #0A2472, #00C896);
            color: white;
            padding: 40px 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(10, 36, 114, 0.2);
        }
        .content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature {
            background: #f1f8ff;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #00C896;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
            color: #666;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 30px 15px;
            }
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>${isArabic ? 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…! ğŸŒ' : 'Hello World! ğŸŒ'}</h1>
        <p>${isArabic ? 'Ù‡Ø°Ø§ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'This is my first website with HTML and Hydara Academy'}</p>
    </div>
    
    <div class="content">
        <h2>${isArabic ? 'Ø¹Ù† Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© ğŸ¦…' : 'About Hydara Academy ğŸ¦…'}</h2>
        <p>${isArabic ? 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© Ù‡ÙŠ Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†ØªØŒ ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¨Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©.' : 
           'Hydara Academy is the first Arabic coding academy that works 100% offline, aiming to empower Arab youth with digital skills.'}</p>
        
        <!-- ØªÙ…Ø±ÙŠÙ† 1: Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† -->
        <!-- TODO: Ø£Ø¶Ù Ø¹Ù†ÙˆØ§Ù† h3 Ù‡Ù†Ø§ -->
        
        <div class="feature-list">
            <!-- ØªÙ…Ø±ÙŠÙ† 2: Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
            <!-- TODO: Ø£Ø¶Ù 3 Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù†Ø§ -->
        </div>
    </div>
    
    <footer>
        <p>${isArabic ? 'ğŸ¦… Ø¨Ù†ÙŠØª Ø¨Ù€ â¤ï¸ ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© | ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª' : 'ğŸ¦… Built with â¤ï¸ and Hydara Academy | Learn coding without internet'}</p>
        <p style="margin-top: 10px; font-size: 12px;">${isArabic ? 'Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ©' : 'Digital sovereignty begins with knowledge'}</p>
    </footer>
</body>
</html></textarea>
                                    <div class="preview-container">
                                        <div style="margin-bottom: 10px; color: #666; font-weight: 600; font-size: 14px;">
                                            ${isArabic ? 'ğŸ” Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©:' : 'ğŸ” Live Preview:'}
                                        </div>
                                        <div class="preview-area" id="htmlPreview"></div>
                                    </div>
                                </div>
                                
                                <div class="practice-section">
                                    <h3 style="color: var(--action-orange);">${isArabic ? 'ğŸ¯ ØªÙ…Ø§Ø±ÙŠÙ† Ø¹Ù…Ù„ÙŠØ©' : 'ğŸ¯ Practical Exercises'}</h3>
                                    <p>${isArabic ? 'Ù‚Ù… Ø¨ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙŠ Ù…Ø­Ø±Ø± Ø§Ù„ÙƒÙˆØ¯ Ø£Ø¹Ù„Ø§Ù‡:' : 'Complete the following exercises in the code editor above:'}</p>
                                    
                                    <div class="exercise">
                                        <div class="exercise-header">
                                            <div class="exercise-icon">1ï¸âƒ£</div>
                                            <div class="exercise-content">
                                                <h4>${isArabic ? 'ØªÙ…Ø±ÙŠÙ†: Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø±Ø¦ÙŠØ³ÙŠ' : 'Exercise: Add Main Heading'}</h4>
                                                <p>${isArabic ? 'Ø£Ø¶Ù Ø¹Ù†ÙˆØ§Ù†Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø« (h3) ÙŠØªØ­Ø¯Ø« Ø¹Ù† Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©' : 'Add a level 3 heading (h3) about the importance of digital sovereignty'}</p>
                                                <details class="exercise-hint">
                                                    <summary>${isArabic ? 'ğŸ’¡ ØªÙ„Ù…ÙŠØ­' : 'ğŸ’¡ Hint'}</summary>
                                                    <div style="margin-top: 10px;">
                                                        <code style="background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 5px; display: block; font-family: monospace;">
                                                            ${isArabic ? 
                                                            '<h3>Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©: Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø£Ù…Ù…</h3>' : 
                                                            '<h3>Digital Sovereignty: The Future of Nations</h3>'}
                                                        </code>
                                                    </div>
                                                </details>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="exercise">
                                        <div class="exercise-header">
                                            <div class="exercise-icon">2ï¸âƒ£</div>
                                            <div class="exercise-content">
                                                <h4>${isArabic ? 'ØªÙ…Ø±ÙŠÙ†: Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ù…ÙŠØ²Ø§Øª' : 'Exercise: Create Features List'}</h4>
                                                <p>${isArabic ? 'Ø£Ù†Ø´Ø¦ 3 Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¦Ù…Ø© (li) Ø¯Ø§Ø®Ù„ div Ù…Ø¹ class="feature-list" ØªØ°ÙƒØ± Ù…Ø²Ø§ÙŠØ§ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'Create 3 list items (li) inside div with class="feature-list" mentioning Hydara Academy advantages'}</p>
                                                <details class="exercise-hint">
                                                    <summary>${isArabic ? 'ğŸ’¡ ØªÙ„Ù…ÙŠØ­' : 'ğŸ’¡ Hint'}</summary>
                                                    <div style="margin-top: 10px;">
                                                        <code style="background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 5px; display: block; font-family: monospace;">
${isArabic ? `<div class="feature">
    <h3>ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</h3>
    <p>ØªØ¹Ù„Ù… ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª ÙˆØ£ÙŠ Ù…ÙƒØ§Ù†</p>
</div>` : `<div class="feature">
    <h3>Works Offline</h3>
    <p>Learn anytime, anywhere</p>
</div>`}
                                                        </code>
                                                    </div>
                                                </details>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="action-buttons">
                                        <button class="check-btn" onclick="academy.checkHtmlExercise()">
                                            ${isArabic ? 'âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†' : 'âœ… Check Exercises'}
                                        </button>
                                        <button class="action-btn secondary" onclick="academy.completeLesson()">
                                            ${isArabic ? 'â© ØªØ®Ø·ÙŠ Ø§Ù„Ø¯Ø±Ø³' : 'â© Skip Lesson'}
                                        </button>
                                        <button class="export-btn" onclick="resetCode()">
                                            ${isArabic ? 'ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†' : 'ğŸ”„ Reset Code'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                    default:
                        return `
                            <div class="module-header">
                                <h1 class="module-title">
                                    <span>${module.icon}</span>
                                    <span>${module.title[this.currentLanguage]}</span>
                                </h1>
                                <p class="module-subtitle">${module.description[this.currentLanguage]}</p>
                            </div>
                            
                            <div class="lesson-content">
                                <div class="arabic-note">
                                    ${isArabic ? 'ğŸ‘¨â€ğŸ’» Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±' : 'ğŸ‘¨â€ğŸ’» Under Development'}
                                </div>
                                
                                <h3>${isArabic ? 'ğŸ“š Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯' : 'ğŸ“š Content Being Prepared'}</h3>
                                <p>${isArabic ? 
                                    'Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø­Ø§Ù„ÙŠØ§Ù‹. Ù†Ø­Ù† Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø­ØªÙˆÙ‰ ØªÙØ§Ø¹Ù„ÙŠ ÙˆØ´Ø§Ù…Ù„ ÙŠØªØ¶Ù…Ù† ØªÙ…Ø§Ø±ÙŠÙ† Ø¹Ù…Ù„ÙŠØ© ÙˆØ£Ù…Ø«Ù„Ø© Ø­ÙŠØ©.' : 
                                    'This lesson is currently under development. We are preparing interactive and comprehensive content including practical exercises and live examples.'}</p>
                                
                                <div style="background: rgba(10,36,114,0.1); padding: 30px; border-radius: var(--radius-lg); margin: 30px 0; border: 2px dashed var(--primary-blue);">
                                    <h4 style="color: var(--accent-green); margin-bottom: 15px;">${isArabic ? 'ğŸ”„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ' : 'ğŸ”„ Timeline'}</h4>
                                    <ul style="color: var(--text-muted); margin-right: 20px;">
                                        <li style="margin-bottom: 10px;">${isArabic ? 'ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¨Ø´ÙƒÙ„ ØªØ¯Ø±ÙŠØ¬ÙŠ' : 'Lessons are being prepared gradually'}</li>
                                        <li style="margin-bottom: 10px;">${isArabic ? 'Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø§Ø±ÙŠÙ† ØªÙØ§Ø¹Ù„ÙŠØ© Ù„ÙƒÙ„ Ø¯Ø±Ø³' : 'Interactive exercises will be added for each lesson'}</li>
                                        <li>${isArabic ? 'Ø³ÙŠØ´Ù…Ù„ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ© Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠ' : 'Will include practical examples from the Arab reality'}</li>
                                    </ul>
                                </div>
                                
                                <div class="practice-section">
                                    <div class="action-buttons">
                                        <button class="check-btn" onclick="academy.completeLesson()">
                                            ${isArabic ? 'âœ… ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© ÙƒÙ…ÙƒØªÙ…Ù„' : 'âœ… Mark as Complete'}
                                        </button>
                                        <button class="action-btn secondary" onclick="academy.loadModule('html_basics')">
                                            ${isArabic ? 'â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ HTML' : 'â† Back to HTML'}
                                        </button>
                                        <button class="export-btn" onclick="academy.loadModule('welcome')">
                                            ${isArabic ? 'ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 'ğŸ  Home'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                }
            }
            
            /**
             * Setup code editor with syntax highlighting
             */
            setupCodeEditor() {
                const codeArea = document.getElementById('htmlCode');
                const preview = document.getElementById('htmlPreview');
                
                if (codeArea && preview) {
                    // Set initial preview
                    this.updateCodePreview();
                    
                    // Add line numbers
                    this.addLineNumbers(codeArea);
                }
            }
            
            /**
             * Update code preview
             */
            updateCodePreview() {
                const codeArea = document.getElementById('htmlCode');
                const preview = document.getElementById('htmlPreview');
                
                if (codeArea && preview) {
                    // Use a sandboxed iframe for better security
                    const iframe = document.createElement('iframe');
                    iframe.srcdoc = codeArea.value;
                    iframe.style.cssText = 'width: 100%; height: 100%; border: none;';
                    
                    // Clear and add iframe
                    preview.innerHTML = '';
                    preview.appendChild(iframe);
                }
            }
            
            /**
             * Add line numbers to code editor
             * @param {HTMLElement} textarea - Textarea element
             */
            addLineNumbers(textarea) {
                // Implementation for line numbers
                // This is a simplified version - in production you'd want a more robust solution
            }
            
            /**
             * Complete current lesson
             */
            completeLesson() {
                if (!this.validateLessonCompletion()) {
                    this.showNotification(
                        this.currentLanguage === 'ar' ? 
                        'âŒ ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¯Ø±Ø³ Ø£ÙˆÙ„Ø§Ù‹' : 
                        'âŒ Please complete lesson requirements first',
                        'warning'
                    );
                    return;
                }
                
                this.student.completedLessons++;
                this.student.points += 20;
                
                // Mark current module as completed if all lessons are done
                const currentModule = this.modules.find(m => m.id === this.currentModule);
                if (currentModule && !currentModule.completed) {
                    currentModule.completed = true;
                    
                    // Unlock next module
                    this.unlockNextModule(currentModule.order);
                }
                
                // Check for achievements
                this.checkAchievements();
                
                // Update UI
                this.updateProgress();
                
                // Show success message
                this.showNotification(
                    this.currentLanguage === 'ar' ? 
                    `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­ +${20} Ù†Ù‚Ø·Ø©` : 
                    `ğŸ‰ Congratulations! Lesson completed +${20} points`,
                    'success'
                );
            }
            
            /**
             * Validate lesson completion requirements
             * @returns {boolean} True if lesson can be completed
             */
            validateLessonCompletion() {
                // For now, allow all lessons to be completed
                // In a full implementation, this would check exercise completion
                return true;
            }
            
            /**
             * Unlock next module in sequence
             * @param {number} currentOrder - Current module order
             */
            unlockNextModule(currentOrder) {
                const nextModule = this.modules.find(m => m.order === currentOrder + 1);
                if (nextModule && !nextModule.unlocked) {
                    nextModule.unlocked = true;
                    this.showNotification(
                        this.currentLanguage === 'ar' ? 
                        `ğŸ”“ ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…ØªØ§Ø­Ø©: ${nextModule.title.ar}` : 
                        `ğŸ”“ New module available: ${nextModule.title.en}`,
                        'info'
                    );
                }
            }
            
            /**
             * Check HTML exercise completion
             */
            checkHtmlExercise() {
                const code = document.getElementById('htmlCode')?.value || '';
                const hasH3 = /<h3[^>]*>.*?<\/h3>/i.test(code);
                const hasFeatureList = /class="feature-list"/i.test(code);
                const featureCount = (code.match(/<div class="feature">/gi) || []).length;
                
                const requirements = [];
                if (!hasH3) requirements.push(this.currentLanguage === 'ar' ? 'Ø¹Ù†ÙˆØ§Ù† h3' : 'h3 heading');
                if (!hasFeatureList) requirements.push(this.currentLanguage === 'ar' ? 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª' : 'features list');
                if (featureCount < 3) requirements.push(`${featureCount}/3 ${this.currentLanguage === 'ar' ? 'Ø¹Ù†Ø§ØµØ±' : 'items'}`);
                
                if (requirements.length === 0) {
                    // Exercise completed successfully
                    this.student.points += 50;
                    this.student.completedLessons++;
                    
                    const htmlModule = this.modules.find(m => m.id === 'html_basics');
                    if (htmlModule) htmlModule.completed = true;
                    
                    this.updateProgress();
                    this.checkAchievements();
                    
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        'ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª ØªÙ…Ø±ÙŠÙ† HTML Ø¨Ù†Ø¬Ø§Ø­ +50 Ù†Ù‚Ø·Ø©' :
                        'ğŸ‰ Excellent! HTML exercise completed +50 points',
                        'success'
                    );
                } else {
                    // Show what's missing
                    const message = this.currentLanguage === 'ar' ?
                        `ğŸ“ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰: ${requirements.join('ØŒ ')}` :
                        `ğŸ“ You need to add: ${requirements.join(', ')}`;
                    
                    this.showNotification(message, 'warning');
                }
            }
            
            /**
             * Check and award achievements
             */
            checkAchievements() {
                // Check HTML expert
                const htmlModule = this.modules.find(m => m.id === 'html_basics');
                if (htmlModule?.completed) {
                    this.earnAchievement('html_expert');
                }
                
                // Check academy graduate
                const allCompleted = this.modules.every(m => m.completed);
                if (allCompleted) {
                    this.earnAchievement('academy_graduate');
                }
                
                // Check level-based achievements
                if (this.student.level >= 3) {
                    this.earnAchievement('offline_master');
                }
            }
            
            /**
             * Award an achievement
             * @param {string} achievementId - Achievement ID
             */
            earnAchievement(achievementId) {
                const achievement = this.achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.earned) {
                    achievement.earned = true;
                    this.student.points += achievement.points;
                    this.renderAchievements();
                    this.updateStudentInfo();
                    
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        `ğŸ† Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯: ${achievement.title.ar} +${achievement.points} Ù†Ù‚Ø·Ø©` :
                        `ğŸ† New Achievement: ${achievement.title.en} +${achievement.points} points`,
                        'success'
                    );
                }
            }
            
            /**
             * Render achievements grid
             */
            renderAchievements() {
                const grid = document.getElementById('achievementsGrid');
                if (!grid) return;
                
                grid.innerHTML = '';
                
                this.achievements.forEach(achievement => {
                    const card = document.createElement('div');
                    card.className = `achievement-card ${achievement.earned ? 'earned' : ''}`;
                    card.setAttribute('role', 'article');
                    card.setAttribute('aria-label', achievement.title[this.currentLanguage]);
                    card.innerHTML = `
                        <div class="achievement-icon">${achievement.icon}</div>
                        <h4 class="achievement-title">${achievement.title[this.currentLanguage]}</h4>
                        <p class="achievement-desc">${achievement.description[this.currentLanguage]}</p>
                        <div class="achievement-status ${achievement.earned ? 'earned' : 'locked'}">
                            ${achievement.earned ? 
                                (this.currentLanguage === 'ar' ? 'âœ… Ù…ÙƒØªØ³Ø¨' : 'âœ… Earned') + ` (+${achievement.points})` : 
                                (this.currentLanguage === 'ar' ? 'ğŸ”’ ØºÙŠØ± Ù…ÙƒØªØ³Ø¨' : 'ğŸ”’ Not Earned')}
                        </div>
                    `;
                    
                    grid.appendChild(card);
                });
            }
            
            /**
             * Update student information and progress
             */
            updateStudentInfo() {
                // Calculate total lessons and progress
                const totalLessons = this.modules.reduce((sum, module) => sum + module.lessons, 0);
                const progressPercentage = Math.min((this.student.completedLessons / totalLessons) * 100, 100);
                this.student.progress = progressPercentage;
                
                // Update progress bar
                const progressFill = document.getElementById('progressFill');
                const progressPercent = document.getElementById('progressPercent');
                
                if (progressFill) {
                    progressFill.style.width = `${progressPercentage}%`;
                    progressFill.setAttribute('aria-valuenow', Math.round(progressPercentage));
                }
                
                if (progressPercent) {
                    progressPercent.textContent = `${Math.round(progressPercentage)}%`;
                }
                
                // Update level based on points
                const newLevel = Math.floor(this.student.points / 100) + 1;
                if (newLevel > this.student.level) {
                    this.student.level = newLevel;
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        `ğŸ‰ Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯! Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${this.student.level}` :
                        `ğŸ‰ New Level! You are now Level ${this.student.level}`,
                        'success'
                    );
                }
                
                // Update level display
                const levelNames = {
                    ar: ['Ù…Ø¨ØªØ¯Ø¦', 'Ù…ØªÙˆØ³Ø·', 'Ù…ØªÙ‚Ø¯Ù…', 'Ø®Ø¨ÙŠØ±', 'Ø³ÙŠØ¯', 'Ø£Ø³ØªØ§Ø°', 'Ø±Ø§Ø¦Ø¯'],
                    en: ['Beginner', 'Intermediate', 'Advanced', 'Expert', 'Master', 'Professor', 'Pioneer']
                };
                const levelIndex = Math.min(this.student.level - 1, levelNames.ar.length - 1);
                const levelName = levelNames[this.currentLanguage][levelIndex];
                
                document.getElementById('studentLevel').textContent = 
                    this.currentLanguage === 'ar' ?
                    `Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${this.student.level}: ${levelName}` :
                    `Level ${this.student.level}: ${levelName}`;
                
                // Update stats
                document.getElementById('completedLessons').textContent = this.student.completedLessons;
                document.getElementById('totalPoints').textContent = this.student.points;
                
                // Update certificate progress
                const certProgress = document.getElementById('certificateProgress');
                const certBtn = document.getElementById('certificateBtn');
                
                if (certProgress) {
                    certProgress.textContent = 
                        this.currentLanguage === 'ar' ?
                        `${Math.round(progressPercentage)}% Ù…ÙƒØªÙ…Ù„ â€¢ ${this.student.completedLessons}/${totalLessons} Ø¯Ø±Ø³ â€¢ ${this.student.points} Ù†Ù‚Ø·Ø©` :
                        `${Math.round(progressPercentage)}% complete â€¢ ${this.student.completedLessons}/${totalLessons} lessons â€¢ ${this.student.points} points`;
                }
                
                if (certBtn) {
                    certBtn.disabled = progressPercentage < 100;
                    certBtn.innerHTML = progressPercentage < 100 ? 
                        (this.currentLanguage === 'ar' ? 
                            `<span>â³</span><span>ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© (${Math.round(progressPercentage)}%)</span>` : 
                            `<span>â³</span><span>Generate Certificate (${Math.round(progressPercentage)}%)</span>`) :
                        (this.currentLanguage === 'ar' ? 
                            `<span>ğŸ“</span><span>ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</span>` : 
                            `<span>ğŸ“</span><span>Generate Certificate</span>`);
                }
            }
            
            /**
             * Update progress and save
             */
            updateProgress() {
                this.saveProgress();
                this.updateStudentInfo();
                this.renderModules();
            }
            
            /**
             * Save progress to localStorage
             */
            saveProgress() {
                try {
                    const data = {
                        student: this.student,
                        modules: this.modules,
                        achievements: this.achievements,
                        currentLanguage: this.currentLanguage,
                        currentModule: this.currentModule,
                        lastUpdated: new Date().toISOString(),
                        version: '2.0.0'
                    };
                    
                    localStorage.setItem('hydara_academy_progress', JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.error('Failed to save progress:', e);
                    this.showNotification(
                        this.currentLanguage === 'ar' ? 
                        'âŒ ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…' : 
                        'âŒ Failed to save progress',
                        'error'
                    );
                    return false;
                }
            }
            
            /**
             * Load progress from localStorage
             */
            loadProgress() {
                try {
                    const saved = localStorage.getItem('hydara_academy_progress');
                    if (saved) {
                        const data = JSON.parse(saved);
                        
                        // Basic data validation
                        if (data.student && data.modules && data.achievements) {
                            // Merge saved data with defaults
                            this.student = { ...this.student, ...data.student };
                            this.modules = data.modules;
                            this.achievements = data.achievements;
                            this.currentLanguage = data.currentLanguage || 'ar';
                            this.currentModule = data.currentModule || 'welcome';
                            
                            // Update last active timestamp
                            this.student.lastActive = new Date().toISOString();
                            
                            console.log('Loaded saved progress');
                            return true;
                        }
                    }
                } catch (e) {
                    console.error('Failed to load progress:', e);
                }
                
                console.log('No saved progress found, using defaults');
                return false;
            }
            
            /**
             * Export progress as JSON file
             */
            exportProgress() {
                const data = {
                    student: this.student,
                    modules: this.modules,
                    achievements: this.achievements,
                    exportDate: new Date().toISOString(),
                    academy: 'Hydara Academy v2.0',
                    version: '2.0.0'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `hydara-academy-progress-${new Date().toISOString().slice(0,10)}.json`;
                a.style.display = 'none';
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification(
                    this.currentLanguage === 'ar' ?
                    'ğŸ’¾ ØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ù…Ù„Ù Ù…Ø­Ù„ÙŠ' :
                    'ğŸ’¾ Your progress saved to local file',
                    'success'
                );
            }
            
            /**
             * Import progress from JSON file
             */
            importProgress() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json,.txt';
                input.style.display = 'none';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const data = JSON.parse(event.target.result);
                            
                            // Validate the imported data
                            if (!data.student || !data.modules || !data.achievements) {
                                throw new Error('Invalid data structure');
                            }
                            
                            // Ask for confirmation
                            const message = this.currentLanguage === 'ar' ?
                                'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø¯Ù…ØŸ' :
                                'Do you want to replace your current progress with this one?';
                            
                            if (confirm(message)) {
                                this.student = { ...this.student, ...data.student };
                                this.modules = data.modules;
                                this.achievements = data.achievements;
                                
                                this.updateProgress();
                                this.renderModules();
                                this.renderAchievements();
                                this.loadModule(this.currentModule);
                                
                                this.showNotification(
                                    this.currentLanguage === 'ar' ?
                                    'ğŸ“‚ ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¨Ù†Ø¬Ø§Ø­' :
                                    'ğŸ“‚ Previous progress imported successfully',
                                    'success'
                                );
                            }
                        } catch (error) {
                            console.error('Import failed:', error);
                            this.showNotification(
                                this.currentLanguage === 'ar' ?
                                'âŒ Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ ØªØ§Ù„Ù' :
                                'âŒ Invalid or corrupted file',
                                'error'
                            );
                        }
                    };
                    
                    reader.readAsText(file);
                };
                
                document.body.appendChild(input);
                input.click();
                document.body.removeChild(input);
            }
            
            /**
             * Reset all progress
             */
            resetProgress() {
                const message = this.currentLanguage === 'ar' ?
                    'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù ÙƒÙ„ ØªÙ‚Ø¯Ù…Ùƒ ÙˆØ³ØªØ¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯.' :
                    'Are you sure? All your progress will be deleted and you will start fresh.';
                
                if (confirm(message)) {
                    localStorage.removeItem('hydara_academy_progress');
                    
                    // Reset student data
                    this.student = {
                        name: 'Ø·Ø§Ù„Ø¨ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©',
                        username: '@Ù…Ø¨Ø±Ù…Ø¬_Ø¹Ø±Ø¨ÙŠ',
                        avatar: 'ğŸš€',
                        level: 1,
                        points: 0,
                        completedLessons: 0,
                        progress: 0,
                        lastActive: new Date().toISOString(),
                        version: '2.0.0'
                    };
                    
                    // Reset modules
                    this.modules.forEach(module => {
                        module.completed = module.id === 'welcome';
                        module.unlocked = module.id === 'welcome' || module.id === 'html_basics';
                    });
                    
                    // Reset achievements
                    this.achievements.forEach(achievement => {
                        achievement.earned = achievement.id === 'first_lesson';
                    });
                    
                    this.updateProgress();
                    this.renderModules();
                    this.renderAchievements();
                    this.loadModule('welcome');
                    
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        'ğŸ”„ Ø¨Ø¯Ø£Øª Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©!' :
                        'ğŸ”„ Started a new journey!',
                        'success'
                    );
                }
            }
            
            /**
             * Generate certificate
             */
            generateCertificate() {
                const progress = Math.min((this.student.completedLessons / 25) * 100, 100);
                if (progress < 100) {
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        'âŒ ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø£ÙˆÙ„Ø§Ù‹' :
                        'âŒ You must complete all lessons first',
                        'error'
                    );
                    return;
                }
                
                // Create certificate in new window
                const certWindow = window.open('', '_blank');
                const isArabic = this.currentLanguage === 'ar';
                
                if (!certWindow) {
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        'âŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹' :
                        'âŒ Please allow popups for this site',
                        'error'
                    );
                    return;
                }
                
                certWindow.document.write(`
                    <!DOCTYPE html>
                    <html lang="${isArabic ? 'ar' : 'en'}" dir="${isArabic ? 'rtl' : 'ltr'}">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>${isArabic ? 'Ø´Ù‡Ø§Ø¯Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'Hydara Academy Certificate'}</title>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');
                            
                            body {
                                font-family: ${isArabic ? "'Cairo', sans-serif" : "Arial, sans-serif"};
                                margin: 0;
                                padding: 40px;
                                background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                min-height: 100vh;
                                color: #333;
                            }
                            
                            .certificate {
                                background: white;
                                width: 1000px;
                                height: 700px;
                                border: 25px solid #D4AF37;
                                padding: 60px;
                                text-align: center;
                                position: relative;
                                box-shadow: 0 30px 80px rgba(0,0,0,0.4);
                                background-image: 
                                    radial-gradient(circle at 20% 80%, rgba(0, 200, 150, 0.05) 0%, transparent 50%),
                                    radial-gradient(circle at 80% 20%, rgba(10, 36, 114, 0.05) 0%, transparent 50%);
                            }
                            
                            .watermark {
                                position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                font-size: 200px;
                                color: rgba(0, 200, 150, 0.08);
                                z-index: 0;
                                user-select: none;
                            }
                            
                            .academy-logo {
                                font-size: 60px;
                                margin-bottom: 20px;
                                position: relative;
                                z-index: 1;
                            }
                            
                            h1 {
                                color: #0A2472;
                                font-size: 52px;
                                margin: 20px 0;
                                position: relative;
                                z-index: 1;
                                text-shadow: 0 2px 10px rgba(10, 36, 114, 0.1);
                            }
                            
                            h2 {
                                color: #00C896;
                                font-size: 32px;
                                margin: 20px 0 40px;
                                position: relative;
                                z-index: 1;
                                font-weight: 600;
                            }
                            
                            .certificate-text {
                                font-size: 20px;
                                color: #666;
                                margin: 30px auto;
                                max-width: 700px;
                                line-height: 1.8;
                                position: relative;
                                z-index: 1;
                            }
                            
                            .student-name {
                                font-size: 56px;
                                color: #0A2472;
                                margin: 40px 0;
                                padding: 30px;
                                background: linear-gradient(135deg, rgba(0, 200, 150, 0.1), rgba(10, 36, 114, 0.1));
                                border-radius: 20px;
                                border: 3px solid rgba(212, 175, 55, 0.3);
                                position: relative;
                                z-index: 1;
                                font-weight: 800;
                            }
                            
                            .details-grid {
                                display: grid;
                                grid-template-columns: repeat(3, 1fr);
                                gap: 30px;
                                margin: 50px 0;
                                position: relative;
                                z-index: 1;
                            }
                            
                            .detail-item {
                                text-align: center;
                                padding: 20px;
                                background: #f8f9fa;
                                border-radius: 15px;
                                border: 2px solid #e0e0e0;
                            }
                            
                            .detail-value {
                                font-size: 32px;
                                color: #0A2472;
                                font-weight: 800;
                                margin-bottom: 5px;
                            }
                            
                            .detail-label {
                                color: #666;
                                font-size: 16px;
                                font-weight: 600;
                            }
                            
                            .signature-area {
                                margin-top: 60px;
                                padding-top: 30px;
                                border-top: 2px solid #ccc;
                                position: relative;
                                z-index: 1;
                            }
                            
                            .issue-date {
                                font-size: 18px;
                                color: #666;
                                margin-bottom: 10px;
                            }
                            
                            .date-value {
                                font-weight: bold;
                                color: #0A2472;
                                font-size: 22px;
                            }
                            
                            .footer {
                                margin-top: 40px;
                                color: #666;
                                font-size: 16px;
                                position: relative;
                                z-index: 1;
                                line-height: 1.6;
                            }
                            
                            .verification {
                                margin-top: 20px;
                                font-size: 14px;
                                color: #999;
                                background: #f5f5f5;
                                padding: 15px;
                                border-radius: 10px;
                                font-family: monospace;
                            }
                            
                            @media print {
                                body {
                                    padding: 0;
                                    background: white;
                                }
                                
                                .certificate {
                                    border: 30px solid #D4AF37;
                                    box-shadow: none;
                                    width: 100%;
                                    height: auto;
                                    page-break-inside: avoid;
                                }
                            }
                        </style>
                    </head>
                    <body>
                        <div class="certificate">
                            <div class="watermark">ğŸ¦…</div>
                            
                            <div class="academy-logo">ğŸ¦…</div>
                            <h1>${isArabic ? 'Ø´Ù‡Ø§Ø¯Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'Hydara Academy Certificate'}</h1>
                            <h2>${isArabic ? 'Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©' : 'Digital Sovereignty Certificate'}</h2>
                            
                            <p class="certificate-text">
                                ${isArabic ? 
                                'ØªÙÙ…Ù†Ø­ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ØªÙ‚Ø¯ÙŠØ±Ø§Ù‹ Ù„Ø¥ØªÙ…Ø§Ù… Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ¥ØªÙ‚Ø§Ù† Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†ØªØŒ ÙˆØ°Ù„Ùƒ Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.' :
                                'This certificate is awarded in recognition of completing the Digital Sovereignty Program and mastering offline programming skills, after successfully completing all academy requirements.'}
                            </p>
                            
                            <div class="student-name">${this.student.name}</div>
                            
                            <div class="details-grid">
                                <div class="detail-item">
                                    <div class="detail-value">${this.student.level}</div>
                                    <div class="detail-label">${isArabic ? 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ' : 'Final Level'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value">${this.student.points}</div>
                                    <div class="detail-label">${isArabic ? 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·' : 'Total Points'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value">${this.student.completedLessons}</div>
                                    <div class="detail-label">${isArabic ? 'Ø¯Ø±Ø³ Ù…ÙƒØªÙ…Ù„' : 'Lessons Completed'}</div>
                                </div>
                            </div>
                            
                            <div class="signature-area">
                                <div class="issue-date">
                                    ${isArabic ? 'ØªÙ… Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙÙŠ:' : 'Issued on:'}
                                    <div class="date-value">${new Date().toLocaleDateString(isArabic ? 'ar-EG' : 'en-US', { 
                                        year: 'numeric', 
                                        month: 'long', 
                                        day: 'numeric',
                                        weekday: 'long'
                                    })}</div>
                                </div>
                            </div>
                            
                            <div class="footer">
                                <div><strong>ğŸ¦… ${isArabic ? 'Ø§Ù„ØªØ­Ø§Ù„Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ù„ØµÙ…ÙˆØ¯ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ' : 'Humanitarian Youth Digital Arab Resilience Alliance'}</strong></div>
                                <div style="margin-top: 15px; font-size: 14px;">
                                    ${isArabic ? 
                                    'Ù‡Ø°Ù‡ Ø´Ù‡Ø§Ø¯Ø© Ø±Ù‚Ù…ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© ØµØ§Ø¯Ø±Ø© Ù…Ù† Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© - Ù…Ù„Ù HTML ÙˆØ§Ø­Ø¯ ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª' :
                                    'This is a certified digital certificate issued by Hydara Academy - Single HTML file works offline'}
                                </div>
                                <div class="verification">
                                    ${isArabic ? 'Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©:' : 'Certificate ID:'} HDA-${Date.now().toString(36).toUpperCase()}
                                </div>
                            </div>
                        </div>
                        
                        <script>
                            // Auto-print after loading
                            window.onload = function() {
                                setTimeout(() => {
                                    window.print();
                                }, 1000);
                            };
                            
                            // Close window after print
                            window.onafterprint = function() {
                                setTimeout(() => {
                                    window.close();
                                }, 1000);
                            };
                        <\/script>
                    </body>
                    </html>
                `);
                
                certWindow.document.close();
                
                this.showNotification(
                    this.currentLanguage === 'ar' ?
                    'ğŸ“ ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø´Ù‡Ø§Ø¯ØªÙƒ! Ø³ÙŠØªÙ… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹' :
                    'ğŸ“ Certificate generated! It will auto-print',
                    'success'
                );
            }
            
            /**
             * Export academy as HTML file
             */
            exportAsHTML() {
                const academyHTML = document.documentElement.outerHTML;
                const blob = new Blob([academyHTML], { type: 'text/html;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©_Ø­ÙŠØ¯Ø±Ø©_Ø¨Ø±Ù…Ø¬Ø©_Ø¯ÙˆÙ†_Ø¥Ù†ØªØ±Ù†Øª.html';
                a.style.display = 'none';
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification(
                    this.currentLanguage === 'ar' ?
                    'ğŸ“„ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙÙŠ Ù…Ù„Ù HTML - Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ!' :
                    'ğŸ“„ Academy saved as HTML file - Share it with friends!',
                    'success'
                );
            }
            
            /**
             * Share academy via Web Share API or download
             */
            shareAcademy() {
                const shareText = this.currentLanguage === 'ar' ?
                    `ğŸ¦… Ø§ÙƒØªØ´Ù Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© - Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª!
                    
ØªØ¹Ù„Ù… HTML, CSS, JavaScript ÙÙŠ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙŠØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª.
Ù…Ù…ÙŠØ²Ø§Øª:
â€¢ ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
â€¢ Ù†Ø¸Ø§Ù… Ù†Ù‚Ø§Ø· ÙˆØ¥Ù†Ø¬Ø§Ø²Ø§Øª
â€¢ Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„
â€¢ ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©

#Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©_Ø­ÙŠØ¯Ø±Ø© #ØªØ¹Ù„Ù…_Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© #ØªÙ‚Ù†ÙŠØ©_Ø¹Ø±Ø¨ÙŠØ© #Ø¯ÙˆÙ†_Ø¥Ù†ØªØ±Ù†Øª` :
                    `ğŸ¦… Discover Hydara Academy - First Arabic coding academy that works without internet!
                    
Learn HTML, CSS, JavaScript in one file that works 100% offline.
Features:
â€¢ Works without internet connection
â€¢ Points and achievements system
â€¢ Certified certificate upon completion
â€¢ Complete Arabic interface

#HydaraAcademy #LearnToCode #ArabTech #OfflineLearning`;
                
                // Try Web Share API first
                if (navigator.share) {
                    navigator.share({
                        title: 'Hydara Academy - Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©',
                        text: shareText,
                        url: window.location.href
                    }).catch(err => {
                        console.log('Sharing failed:', err);
                        this.exportAsHTML();
                    });
                } else {
                    // Fallback: download file
                    this.exportAsHTML();
                }
            }
            
            /**
             * Show notification
             * @param {string} message - Notification message
             * @param {string} type - Notification type (success, error, warning, info)
             */
            showNotification(message, type = 'success') {
                // Remove existing notifications
                document.querySelectorAll('.notification').forEach(n => {
                    n.style.animation = 'slideOutRight 0.3s ease forwards';
                    setTimeout(() => n.remove(), 300);
                });
                
                // Create new notification
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.setAttribute('role', 'alert');
                notification.setAttribute('aria-live', 'assertive');
                
                const icons = {
                    success: 'âœ…',
                    error: 'âŒ',
                    warning: 'âš ï¸',
                    info: 'â„¹ï¸'
                };
                
                notification.innerHTML = `
                    <span class="notification-icon">${icons[type] || 'ğŸ’¡'}</span>
                    <span>${message}</span>
                    <button class="notification-close" onclick="this.parentElement.remove()" aria-label="Ø¥ØºÙ„Ø§Ù‚">
                        âœ•
                    </button>
                `;
                
                document.body.appendChild(notification);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.style.animation = 'slideOutRight 0.3s ease forwards';
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.parentNode.removeChild(notification);
                            }
                        }, 300);
                    }
                }, 5000);
            }
            
            /**
             * Show backup management modal
             */
            showBackupMenu() {
                const modal = document.getElementById('backupModal');
                if (modal) {
                    modal.style.display = 'flex';
                }
            }
            
            /**
             * Hide backup management modal
             */
            hideBackupMenu() {
                const modal = document.getElementById('backupModal');
                if (modal) {
                    modal.style.display = 'none';
                }
            }
            
            /**
             * Clear all backup data
             */
            clearAllBackups() {
                const message = this.currentLanguage === 'ar' ?
                    'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ Ù‡Ø°Ø§ Ù„Ø§ ÙŠØ­Ø°Ù ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ.' :
                    'Are you sure you want to delete all backup files? This will not delete your current progress.';
                
                if (confirm(message)) {
                    // In a real implementation, you would manage backup files
                    // For now, we'll just show a notification
                    this.showNotification(
                        this.currentLanguage === 'ar' ?
                        'ğŸ—‘ï¸ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©' :
                        'ğŸ—‘ï¸ Backup files cleaned',
                        'info'
                    );
                    this.hideBackupMenu();
                }
            }
        }

        // Global helper functions for code editor
        function runCode() {
            academy.updateCodePreview();
        }

        function resetCode() {
            const codeArea = document.getElementById('htmlCode');
            if (codeArea) {
                const isArabic = academy.currentLanguage === 'ar';
                codeArea.value = `<!DOCTYPE html>
<html lang="${isArabic ? 'ar' : 'en'}" dir="${isArabic ? 'rtl' : 'ltr'}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${isArabic ? 'Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„ | Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'My First Site | Hydara Academy'}</title>
    <style>
        body {
            font-family: ${isArabic ? "'Cairo', 'Segoe UI', sans-serif" : "Arial, sans-serif"};
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
            color: #333;
            line-height: 1.8;
        }
        .header {
            background: linear-gradient(135deg, #0A2472, #00C896);
            color: white;
            padding: 40px 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(10, 36, 114, 0.2);
        }
        .content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature {
            background: #f1f8ff;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #00C896;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
            color: #666;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 30px 15px;
            }
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>${isArabic ? 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…! ğŸŒ' : 'Hello World! ğŸŒ'}</h1>
        <p>${isArabic ? 'Ù‡Ø°Ø§ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø©' : 'This is my first website with HTML and Hydara Academy'}</p>
    </div>
    
    <div class="content">
        <h2>${isArabic ? 'Ø¹Ù† Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© ğŸ¦…' : 'About Hydara Academy ğŸ¦…'}</h2>
        <p>${isArabic ? 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© Ù‡ÙŠ Ø£ÙˆÙ„ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø±Ø¨ÙŠØ© ØªØ¹Ù…Ù„ 100% Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†ØªØŒ ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¨Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©.' : 
           'Hydara Academy is the first Arabic coding academy that works 100% offline, aiming to empower Arab youth with digital skills.'}</p>
        
        <!-- ØªÙ…Ø±ÙŠÙ† 1: Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† -->
        <!-- TODO: Ø£Ø¶Ù Ø¹Ù†ÙˆØ§Ù† h3 Ù‡Ù†Ø§ -->
        
        <div class="feature-list">
            <!-- ØªÙ…Ø±ÙŠÙ† 2: Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
            <!-- TODO: Ø£Ø¶Ù 3 Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù†Ø§ -->
        </div>
    </div>
    
    <footer>
        <p>${isArabic ? 'ğŸ¦… Ø¨Ù†ÙŠØª Ø¨Ù€ â¤ï¸ ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø­ÙŠØ¯Ø±Ø© | ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª' : 'ğŸ¦… Built with â¤ï¸ and Hydara Academy | Learn coding without internet'}</p>
        <p style="margin-top: 10px; font-size: 12px;">${isArabic ? 'Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ©' : 'Digital sovereignty begins with knowledge'}</p>
    </footer>
</body>
</html>`;
                runCode();
            }
        }

        function formatCode() {
            const codeArea = document.getElementById('htmlCode');
            if (codeArea) {
                // Simple formatting - in production use a proper formatter
                const code = codeArea.value
                    .replace(/(>)(<)(\/*)/g, '$1\n$2$3')
                    .replace(/^\s*/gm, '    ');
                codeArea.value = code;
                runCode();
                
                academy.showNotification(
                    academy.currentLanguage === 'ar' ? 
                    'âœ¨ ØªÙ… ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­' : 
                    'âœ¨ Code formatted successfully',
                    'info'
                );
            }
        }

        // Initialize academy when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.academy = new HydaraAcademy();
            
            // Set global functions
            window.setLanguage = (lang) => window.academy.setLanguage(lang);
            window.exportProgress = () => window.academy.exportProgress();
            window.importProgress = () => window.academy.importProgress();
            window.resetProgress = () => window.academy.resetProgress();
            window.generateCertificate = () => window.academy.generateCertificate();
            window.shareAcademy = () => window.academy.shareAcademy();
            window.showBackupMenu = () => window.academy.showBackupMenu();
            window.hideBackupMenu = () => window.academy.hideBackupMenu();
            window.clearAllBackups = () => window.academy.clearAllBackups();
            window.runCode = runCode;
            window.resetCode = resetCode;
            window.formatCode = formatCode;
            
            // Add service worker for offline capability (simplified)
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service-worker.js').catch(console.log);
            }
        });

        // Handle page visibility for auto-save
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && window.academy) {
                window.academy.saveProgress();
            }
        });
    </script>
</body>
</html>